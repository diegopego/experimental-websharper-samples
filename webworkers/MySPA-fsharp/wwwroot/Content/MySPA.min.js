(function(n){"use strict";Date.now||(Date.now=function(){return(new Date).getTime()});Math.trunc||(Math.trunc=function(n){return n<0?Math.ceil(n):Math.floor(n)});Object.setPrototypeOf||(Object.setPrototypeOf=function(n,t){return n.__proto__=t,n});n.WebSharper={Runtime:{Ctor:function(n,t){return n.prototype=t.prototype,n},Class:function(n,t,i){var u=n,f,r,e;if(t){u=new t;for(f in n)u[f]=n[f]}if(r=function(n){if(n)for(var t in n)this[t]=n[t]},r.prototype=u,i)for(e in i)r[e]=i[e];return r},Clone:function(n){var t={};for(var i of Object.getOwnPropertyNames(n))t[i]=n[i];return Object.setPrototypeOf(t,Object.getPrototypeOf(n)),t},NewObject:function(n){for(var i={},t=0;t<n.length;t++)i[n[t][0]]=n[t][1];return i},PrintObject:function(n){var t="{ ",i=!0;for(var r of Object.getOwnPropertyNames(n))i?i=!1:t+=", ",t+=r+" = "+n[r];return t+(i?"}":" }")},DeleteEmptyFields:function(n,t){for(var r,i=0;i<t.length;i++)r=t[i],n[r]===void 0&&delete n[r];return n},GetOptional:function(n){return n===void 0?null:{$:1,$0:n}},SetOptional:function(n,t,i){i?n[t]=i.$0:delete n[t]},SetOrDelete:function(n,t,i){i===void 0?delete n[t]:n[t]=i},Apply:function(n,t,i){return n.apply(t,i)},Bind:function(n){return function(){return n.apply(this,arguments)}},CreateFuncWithArgs:function(n){return function(){return n(Array.prototype.slice.call(arguments))}},CreateFuncWithOnlyThis:function(n){return function(){return n(this)}},CreateFuncWithThis:function(n){return function(){return n(this).apply(null,arguments)}},CreateFuncWithThisArgs:function(n){return function(){return n(this)(Array.prototype.slice.call(arguments))}},CreateFuncWithRest:function(n,t){return function(){return t(Array.prototype.slice.call(arguments,0,n).concat([Array.prototype.slice.call(arguments,n)]))}},CreateFuncWithArgsRest:function(n,t){return function(){return t([Array.prototype.slice.call(arguments,0,n),Array.prototype.slice.call(arguments,n)])}},BindDelegate:function(n,t){var i=n.bind(t);return i.$Func=n,i.$Target=t,i},CreateDelegate:function(n){if(n.length==0)return null;if(n.length==1)return n[0];var t=function(){for(var i,t=0;t<n.length;t++)i=n[t].apply(null,arguments);return i};return t.$Invokes=n,t},CombineDelegates:function(n){for(var t,i=[],r=0;r<n.length;r++)t=n[r],t&&("$Invokes"in t?i=i.concat(t.$Invokes):i.push(t));return WebSharper.Runtime.CreateDelegate(i)},DelegateEqual:function(n,t){var f,e,i,r,u;if(n===t)return!0;if(n==null||t==null||(f=n.$Invokes||[n],e=t.$Invokes||[t],f.length!=e.length))return!1;for(i=0;i<f.length;i++)if(r=f[i],u=e[i],!(r===u||"$Func"in r&&"$Func"in u&&r.$Func===u.$Func&&r.$Target==u.$Target))return!1;return!0},ThisFunc:function(n){return function(){var t=Array.prototype.slice.call(arguments);return t.unshift(this),n.apply(null,t)}},ThisFuncOut:function(n){return function(){var t=Array.prototype.slice.call(arguments);return n.apply(t.shift(),t)}},ParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat([i.slice(n)]))}},ParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat(i[n]))}},ThisParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return i.unshift(this),t.apply(null,i.slice(0,n+1).concat([i.slice(n+1)]))}},ThisParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(i.shift(),i.slice(0,n).concat(i[n]))}},Curried:function(n,t,i){return i=i||[],function(r){var u=i.concat([r===void 0?null:r]);return t==1?n.apply(null,u):t==2?function(t){return n.apply(null,u.concat([t===void 0?null:t]))}:WebSharper.Runtime.Curried(n,t-1,u)}},Curried2:function(n){return function(t){return function(i){return n(t,i)}}},Curried3:function(n){return function(t){return function(i){return function(r){return n(t,i,r)}}}},UnionByType:function(n,t,i){for(var u,f=typeof t,r=0;r<n.length;r++)if(u=n[r],typeof u=="number"){if(Array.isArray(t)&&(u==0||t.length==u))return{$:r,$0:t}}else if(u==f)return{$:r,$0:t};if(!i)throw new Error("Type not expected for creating Choice value.");},MarkResizable:function(n){return Object.defineProperty(n,"resizable",{enumerable:!1,writable:!1,configurable:!1,value:!0}),n},MarkReadOnly:function(n){return Object.defineProperty(n,"readonly",{enumerable:!1,writable:!1,configurable:!1,value:!0}),n},ScriptBasePath:"./",ScriptPath:function(n,t){return this.ScriptBasePath+(this.ScriptSkipAssemblyDir?"":n+"/")+t},OnLoad:function(n){"load"in this||(this.load=[]);this.load.push(n)},Start:function(){function n(n){for(var t=0;t<n.length;t++)n[t]()}"load"in this&&(n(this.load),this.load=[])}}};n.WebSharper.Runtime.OnLoad(function(){n.WebSharper&&WebSharper.Activator&&WebSharper.Activator.Activate&&WebSharper.Activator.Activate()});n.ignore=function(){};n.id=function(n){return n};n.fst=function(n){return n[0]};n.snd=function(n){return n[1]};n.trd=function(n){return n[2]};n.console||(n.console={count:ignore,dir:ignore,error:ignore,group:ignore,groupEnd:ignore,info:ignore,log:ignore,profile:ignore,profileEnd:ignore,time:ignore,timeEnd:ignore,trace:ignore,warn:ignore})})(self);
/* https://github.com/jonathantneal/closest */
(function(w,p){p=w.Element.prototype
if(!p.matches){p.matches=p.msMatchesSelector||function(s){var m=(this.document||this.ownerDocument).querySelectorAll(s);for(var i=0;m[i]&&m[i]!==e;++i);return!!m[i]}}
if(!p.closest){p.closest=function(s){var e=this;while(e&&e.nodeType==1){if(e.matches(s))return e;e=e.parentNode}return null}}})(self);
(function(){for(var i=0,t=["webkit","moz"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(n){var t=(new Date).getTime(),r=Math.max(0,16-(t-i)),u=window.setTimeout(function(){n(t+r)},r);return i=t+r,u});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(n){clearTimeout(n)})})();
(function(a){"use strict";var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE,bF,bG,bH,bI,bJ,bK,bL,bM,bN,bO,bP,bQ,bR,bS,bT,bU,bV;b=a.MySPA=a.MySPA||{};c=b.Client=b.Client||{};d=a.EventTarget;e=a.Event;f=a.WebSharper=a.WebSharper||{};g=f.Operators=f.Operators||{};h=f.Obj=f.Obj||{};i=f.UI=f.UI||{};j=i.Var$1=i.Var$1||{};k=i.Templating=i.Templating||{};l=k.Runtime=k.Runtime||{};m=l.Server=l.Server||{};n=m.TemplateInstance=m.TemplateInstance||{};o=f.Arrays=f.Arrays||{};p=m.ProviderBuilder=m.ProviderBuilder||{};q=i.ListModel=i.ListModel||{};r=f.Unchecked=f.Unchecked||{};s=a.MySPA_Templates=a.MySPA_Templates||{};t=m.Handler=m.Handler||{};u=i.Var=i.Var||{};v=i.ConcreteVar=i.ConcreteVar||{};w=i.Snap=i.Snap||{};x=a.System=a.System||{};y=x.Guid=x.Guid||{};z=a.StartupCode$MySPA$Client=a.StartupCode$MySPA$Client||{};A=f.JavaScript=f.JavaScript||{};B=A.Pervasives=A.Pervasives||{};C=i.Client=i.Client||{};D=C.Templates=C.Templates||{};E=i.Doc=i.Doc||{};F=i.Abbrev=i.Abbrev||{};G=F.Fresh=F.Fresh||{};H=f.Collections=f.Collections||{};I=H.Dictionary=H.Dictionary||{};J=a.Node;K=i.View=i.View||{};L=a.Object;M=i.AttrProxy=i.AttrProxy||{};N=a.Blob;O=i.CheckedInput=i.CheckedInput||{};P=f.Numeric=f.Numeric||{};Q=H.HashSet=H.HashSet||{};R=f.Seq=f.Seq||{};S=m.TemplateInitializer=m.TemplateInitializer||{};T=A.JS=A.JS||{};U=H.DictionaryUtil=H.DictionaryUtil||{};V=f.Enumerator=f.Enumerator||{};W=V.T=V.T||{};X=a.WindowOrWorkerGlobalScope;Y=a.StartupCode$WebSharper_UI$Templates=a.StartupCode$WebSharper_UI$Templates||{};Z=i.Docs=i.Docs||{};_0=a.StartupCode$WebSharper_UI$Abbrev=a.StartupCode$WebSharper_UI$Abbrev||{};_1=i.DocElemNode=i.DocElemNode||{};_2=a.CharacterData;_3=i.Storage=i.Storage||{};_4=i.Elt=i.Elt||{};_5=a.Element;_6=D.Prepare=D.Prepare||{};_7=f.Slice=f.Slice||{};_8=i.DomUtility=i.DomUtility||{};_9=H.KeyCollection=H.KeyCollection||{};_=i.An=i.An||{};$=C.Settings=C.Settings||{};ba=F.Mailbox=F.Mailbox||{};bb=C.Attrs=C.Attrs||{};bc=bb.Dyn=bb.Dyn||{};bd=i.Array=i.Array||{};be=_3.ArrayStorage=_3.ArrayStorage||{};bf=i.Attrs=i.Attrs||{};bg=i.AttrModule=i.AttrModule||{};bh=f.List=f.List||{};bi=bh.T=bh.T||{};bj=f.Strings=f.Strings||{};bk=i.Updates=i.Updates||{};bl=H.ValueCollection=H.ValueCollection||{};bm=C.Docs=C.Docs||{};bn=bm.RunState=bm.RunState||{};bo=bm.NodeSet=bm.NodeSet||{};bp=f.Concurrency=f.Concurrency||{};bq=i.Anims=i.Anims||{};br=a.StartupCode$WebSharper_UI$Doc_Proxy=a.StartupCode$WebSharper_UI$Doc_Proxy||{};bs=H.HashSetUtil=H.HashSetUtil||{};bt=i.BindVar=i.BindVar||{};bu=a.StartupCode$WebSharper_UI$DomUtility=a.StartupCode$WebSharper_UI$DomUtility||{};bv=a.StartupCode$WebSharper_UI$Animation=a.StartupCode$WebSharper_UI$Animation||{};bw=i.AppendList=i.AppendList||{};bx=a.StartupCode$WebSharper_UI$Attr_Client=a.StartupCode$WebSharper_UI$Attr_Client||{};by=i.DynamicAttrNode=i.DynamicAttrNode||{};bz=a.Error;bA=f.KeyNotFoundException=f.KeyNotFoundException||{};bB=bp.Scheduler=bp.Scheduler||{};bC=i.Easing=i.Easing||{};bD=bp.AsyncBody=bp.AsyncBody||{};bE=a.StartupCode$WebSharper_Main$Concurrency=a.StartupCode$WebSharper_Main$Concurrency||{};bF=bp.CT=bp.CT||{};bG=F.HashSet=F.HashSet||{};bH=i.String=i.String||{};bI=f.CancellationTokenSource=f.CancellationTokenSource||{};bJ=bm.DomNodes=bm.DomNodes||{};bK=f.Queue=f.Queue||{};bL=f.Char=f.Char||{};bM=f.DateUtil=f.DateUtil||{};bN=f.OperationCanceledException=f.OperationCanceledException||{};bO=f.Lazy=f.Lazy||{};bP=a.StartupCode$WebSharper_UI$AppendList=a.StartupCode$WebSharper_UI$AppendList||{};bQ=f.LazyExtensionsProxy=f.LazyExtensionsProxy||{};bR=bQ.LazyRecord=bQ.LazyRecord||{};bS=a.console;bT=f&&f.Runtime;bU=a.Math;bV=a.Date;c.Main=function(){var bW,bX,bY,bZ,b0,b1,b2,b3,b4,b5,b6;bS.log("The main thread wrote: main thread was initialized.");bW=new a.Worker(bT.ScriptPath("MySPA","MySPA.worker.js"));bW.onmessage=function(b7){bS.log(b7.data);return bW.terminate();};bX=new a.Worker(bT.ScriptPath("MySPA","MySPA.worker0.js"));bX.onmessage=function(b7){return bS.log("Main thread says: Received message from echoWorker thread: "+a.String(b7.data));};bY=j.Create$1("");bZ=(b0=(b1=(b2=(b3=E.Convert(function(b7){var b8,b9,b_,b$;return(b8=(b9=new p.New$1(),(b9.h.push({$:1,$0:"name",$1:b7}),b9)),(b_=t.CompleteHoles(b8.k,b8.h,[]),(b$=new n.New(b_[1],s.listitem(b_[0])),b8.i=b$,b$))).get_Doc();},c.People().v),(b4=new p.New$1(),(b4.h.push({$:0,$0:"listcontainer",$1:b3}),b4))),(b2.h.push({$:10,$0:"name",$1:bY}),b2)),(b1.h.push(t.EventQ2(b1.k,"add",function(){return b1.i;},function(){c.People().Append(bY.Get());bS.log("Main thread says: will post to worker!");bX.postMessage("Hello, worker! "+a.String(bY.Get())+" was added.");bY.Set("");})),b1)),(b5=t.CompleteHoles(b0.k,b0.h,[["name",0,null]]),(b6=new n.New(b5[1],s.main(b5[0])),b0.i=b6,b6))).get_Doc();D.LoadLocalTemplates("");E.RunById("main",bZ);};c.People=function(){z.$cctor();return z.People;};g.FailWith=function(bW){throw new bz(bW);};g.KeyValue=function(bW){return[bW.K,bW.V];};g.range=function(bW,bX){var bY;bY=1+bX-bW;return bY<=0?[]:R.init(bY,function(bZ){return bZ+bW;});};h=f.Obj=bT.Class({Equals:function(bW){return this===bW;},GetHashCode:function(){return -1;}},null,h);h.New=bT.Ctor(function(){},h);j=i.Var$1=bT.Class({},h,j);j.Create$1=function(bW){return new v.New(false,w.New({$:2,$0:bW,$1:[]}),bW);};n=m.TemplateInstance=bT.Class({get_Doc:function(){return this.doc;},SetAnchorRoot:function(bW){this.anchorRoot=bW;}},h,n);n.New=bT.Ctor(function(bW,bX){h.New.call(this);this.doc=bX;this.allVars=bW.$==0?bW.$0:g.FailWith("Should not happen");this.anchorRoot=null;},n);o.get=function(bW,bX){o.checkBounds(bW,bX);return bW[bX];};o.length=function(bW){return bW.dims===2?bW.length*bW.length:bW.length;};o.checkBounds=function(bW,bX){if(bX<0||bX>=bW.length)g.FailWith("Index was outside the bounds of the array.");};o.set=function(bW,bX,bY){o.checkBounds(bW,bX);bW[bX]=bY;};p=m.ProviderBuilder=bT.Class({},h,p);p.New$1=bT.Ctor(function(){var bW;h.New.call(this);this.i=null;this.k=(bW=y.NewGuid(),a.String(bW));this.h=bT.MarkResizable([]);bT.SetOptional(this,"s",null);},p);q=i.ListModel=bT.Class({Append:function(bW){var bX,bY,bZ,b0;bX=this;bY=this["var"].Get();bZ=this.key(bW);b0=o.tryFindIndex(function(b1){return r.Equals(bX.key(b1),bZ);},bY);if(b0!=null&&b0.$==1)this["var"].Set(this.storage.SSetAt(b0.$0,bW,bY));else this["var"].Set(this.storage.SAppend(bW,bY));this.ObsoleteKey(bZ);},ObsoleteKey:function(bW){var bX,bY;bX=(bY=null,[this.it.TryGetValue(bW,{get:function(){return bY;},set:function(bZ){bY=bZ;}}),bY]);if(bX[0]){w.Obsolete(bX[1]);this.it.RemoveKey(bW);}},GetEnumerator:function(){return V.Get(this["var"].Get());},GetEnumerator0:function(){return V.Get0(this["var"].Get());}},h,q);q.New=bT.Ctor(function(bW,bX){q.New$3.call(this,bW,j.Create$1(o.ofSeq(R.distinctBy(bW,bX.SInit()))),bX);},q);q.New$3=bT.Ctor(function(bW,bX,bY){h.New.call(this);this.key=bW;this["var"]=bX;this.storage=bY;this.v=K.Map(function(bZ){return bZ.slice();},this["var"].get_View());this.it=new I.New$5();},q);r.Equals=function(bW,bX){var bY,bZ,b0,b1;if(bW===bX)return true;else{bY=typeof bW;if(bY=="object"){if(bW===null||bW===void 0||bX===null||bX===void 0||!r.Equals(typeof bX,"object"))return false;else if("Equals"in bW)return bW.Equals(bX);else if("Equals"in bX)return false;else if(bW instanceof a.Array&&bX instanceof a.Array)return r.arrayEquals(bW,bX);else if(bW instanceof a.Date&&bX instanceof a.Date)return r.dateEquals(bW,bX);else{bZ=[true];for(var b2 in bW)if(function(b3){bZ[0]=!bW.hasOwnProperty(b3)||bX.hasOwnProperty(b3)&&r.Equals(bW[b3],bX[b3]);return!bZ[0];}(b2))break;if(bZ[0]){for(var b3 in bX)if(function(b4){bZ[0]=!bX.hasOwnProperty(b4)||bW.hasOwnProperty(b4);return!bZ[0];}(b3))break;}return bZ[0];}}else return bY=="function"&&("$Func"in bW?bW.$Func===bX.$Func&&bW.$Target===bX.$Target:"$Invokes"in bW&&"$Invokes"in bX&&r.arrayEquals(bW.$Invokes,bX.$Invokes));}};r.arrayEquals=function(bW,bX){var bY,bZ;if(o.length(bW)===o.length(bX)){bY=true;bZ=0;while(bY&&bZ<o.length(bW)){!r.Equals(o.get(bW,bZ),o.get(bX,bZ))?bY=false:void 0;bZ=bZ+1;}return bY;}else return false;};r.dateEquals=function(bW,bX){return bW.getTime()===bX.getTime();};r.Hash=function(bW){var bX;bX=typeof bW;return bX=="function"?0:bX=="boolean"?bW?1:0:bX=="number"?bW:bX=="string"?r.hashString(bW):bX=="object"?bW==null?0:bW instanceof a.Array?r.hashArray(bW):r.hashObject(bW):0;};r.hashString=function(bW){var bX,bY,bZ;if(bW===null)return 0;else{bX=5381;for(bY=0,bZ=bW.length-1;bY<=bZ;bY++)bX=r.hashMix(bX,bW[bY].charCodeAt());return bX;}};r.hashArray=function(bW){var bX,bY,bZ;bX=-34948909;for(bY=0,bZ=o.length(bW)-1;bY<=bZ;bY++)bX=r.hashMix(bX,r.Hash(o.get(bW,bY)));return bX;};r.hashObject=function(bW){var bX,bY;if("GetHashCode"in bW)return bW.GetHashCode();else{bX=[0];for(var bZ in bW)if(function(b0){bX[0]=r.hashMix(r.hashMix(bX[0],r.hashString(b0)),r.Hash(bW[b0]));return false;}(bZ))break;return bX[0];}};r.hashMix=function(bW,bX){return(bW<<5)+bW+bX;};r.Compare=function(bW,bX){var bY,bZ,b0,b1,b2,b3;if(bW===bX)return 0;else{bZ=typeof bW;switch(bZ=="function"?1:bZ=="boolean"?2:bZ=="number"?2:bZ=="string"?2:bZ=="object"?3:0){case 0:return typeof bX=="undefined"?0:-1;case 1:return g.FailWith("Cannot compare function values.");case 2:return bW<bX?-1:1;case 3:if(bW===null)b0=-1;else if(bX===null)b0=1;else if("CompareTo"in bW)b0=bW.CompareTo(bX);else if("CompareTo0"in bW)b0=bW.CompareTo0(bX);else if(bW instanceof a.Array&&bX instanceof a.Array)b0=r.compareArrays(bW,bX);else if(bW instanceof a.Date&&bX instanceof a.Date)b0=r.compareDates(bW,bX);else{b1=[0];for(var b4 in bW)if(function(b5){return!bW.hasOwnProperty(b5)?false:!bX.hasOwnProperty(b5)?(b1[0]=1,true):(b1[0]=r.Compare(bW[b5],bX[b5]),b1[0]!==0);}(b4))break;if(b1[0]===0){for(var b5 in bX)if(function(b6){return!bX.hasOwnProperty(b6)?false:!bW.hasOwnProperty(b6)&&(b1[0]=-1,true);}(b5))break;}b0=b1[0];}return b0;}}};r.compareArrays=function(bW,bX){var bY,bZ;if(o.length(bW)<o.length(bX))return -1;else if(o.length(bW)>o.length(bX))return 1;else{bY=0;bZ=0;while(bY===0&&bZ<o.length(bW)){bY=r.Compare(o.get(bW,bZ),o.get(bX,bZ));bZ=bZ+1;}return bY;}};r.compareDates=function(bW,bX){return r.Compare(bW.getTime(),bX.getTime());};s.listitem=function(bW){D.LoadLocalTemplates("index");return bW?D.NamedTemplate("index",{$:1,$0:"listitem"},bW):void 0;};s.main=function(bW){D.LoadLocalTemplates("index");return bW?D.NamedTemplate("index",{$:1,$0:"main"},bW):void 0;};t.EventQ2=function(bW,bX,bY,bZ){return{$:5,$0:bX,$1:function(b0){return function(b1){var b2;b2=bY();b2.SetAnchorRoot(b0);return bZ({Vars:b2,Anchors:b2,Target:b0,Event:b1});};}};};t.CompleteHoles=function(bW,bX,bY){var b0,b1,b2,b3,b4;function bZ(b5,b6,b7){var b8;return b1.Contains(b5)?null:(b8=r.Equals(b6,0)?S.GetOrAddHoleFor(bW,b5,function(){return{$:10,$0:b5,$1:j.Create$1("")};}):r.Equals(b6,1)?S.GetOrAddHoleFor(bW,b5,function(){return{$:18,$0:b5,$1:j.Create$1(0)};}):r.Equals(b6,2)?S.GetOrAddHoleFor(bW,b5,function(){return{$:11,$0:b5,$1:j.Create$1(false)};}):r.Equals(b6,3)?S.GetOrAddHoleFor(bW,b5,function(){return{$:12,$0:b5,$1:j.Create$1(-8640000000000000)};}):r.Equals(b6,4)?S.GetOrAddHoleFor(bW,b5,function(){return{$:13,$0:b5,$1:j.Create$1([])};}):r.Equals(b6,5)?S.GetOrAddHoleFor(bW,b5,function(){var b9;b9=self.document.querySelector("[ws-dom="+b5+"]");b9.removeAttribute("ws-dom");return{$:14,$0:b5,$1:j.Create$1({$:1,$0:b9})};}):g.FailWith("Invalid value type"),(b0.set_Item(b5,b8),{$:1,$0:b8}));}b0=new I.New$5();b1=new Q.New$3();b2=V.Get(bX);try{while(b2.MoveNext()){b3=b2.Current();b4=b3.$0;b1.SAdd(b4);b0.set_Item(b4,b3);}}finally{if(typeof b2=="object"&&"Dispose"in b2)b2.Dispose();}return[R.append(bX,o.choose(function(b5){return bZ(b5[0],b5[1],b5[2]);},bY)),{$:0,$0:b0}];};u=i.Var=bT.Class({},h,u);u.New=bT.Ctor(function(){h.New.call(this);},u);v=i.ConcreteVar=bT.Class({Get:function(){return this.current;},Set:function(bW){if(this.isConst)(function(bX){return bX("WebSharper.UI: invalid attempt to change value of a Var after calling SetFinal");}(function(bX){bS.log(bX);}));else{w.Obsolete(this.snap);this.current=bW;this.snap=w.New({$:2,$0:bW,$1:[]});}},get_View:function(){return this.view;},SetFinal:function(bW){if(this.isConst)(function(bX){return bX("WebSharper.UI: invalid attempt to change value of a Var after calling SetFinal");}(function(bX){bS.log(bX);}));else{w.Obsolete(this.snap);this.isConst=true;this.current=bW;this.snap=w.New({$:0,$0:bW});}},UpdateMaybe:function(bW){var bX;bX=bW(this.Get());if(bX!=null&&bX.$==1)this.Set(bX.$0);}},u,v);v.New=bT.Ctor(function(bW,bX,bY){var bZ;bZ=this;u.New.call(this);this.isConst=bW;this.current=bY;this.snap=bX;this.view=function(){return bZ.snap;};this.id=G.Int();},v);w.Map=function(bW,bX){var bY,bZ;bY=bX.s;return bY!=null&&bY.$==0?w.New({$:0,$0:bW(bY.$0)}):(bZ=w.New({$:3,$0:[],$1:[]}),(w.When(bX,function(b0){w.MarkDone(bZ,bX,bW(b0));},bZ),bZ));};w.WhenRun=function(bW,bX,bY){var bZ;bZ=bW.s;if(bZ==null)bY();else bZ!=null&&bZ.$==2?(bZ.$1.push(bY),bX(bZ.$0)):bZ!=null&&bZ.$==3?(bZ.$0.push(bX),bZ.$1.push(bY)):bX(bZ.$0);};w.WhenObsoleteRun=function(bW,bX){var bY;bY=bW.s;if(bY==null)bX();else bY!=null&&bY.$==2?bY.$1.push(bX):bY!=null&&bY.$==3?bY.$1.push(bX):void 0;};w.When=function(bW,bX,bY){var bZ;bZ=bW.s;if(bZ==null)w.Obsolete(bY);else bZ!=null&&bZ.$==2?(w.EnqueueSafe(bZ.$1,bY),bX(bZ.$0)):bZ!=null&&bZ.$==3?(bZ.$0.push(bX),w.EnqueueSafe(bZ.$1,bY)):bX(bZ.$0);};w.MarkDone=function(bW,bX,bY){var bZ;if(bZ=bX.s,bZ!=null&&bZ.$==0)w.MarkForever(bW,bY);else w.MarkReady(bW,bY);};w.Map3=function(bW,bX,bY,bZ){var b0,b1,b2,b3;function b4(b5){var b6,b7,b8,b9;if(!(b6=b3.s,b6!=null&&b6.$==0||b6!=null&&b6.$==2)){b7=w.ValueAndForever(bX);b8=w.ValueAndForever(bY);b9=w.ValueAndForever(bZ);if(b7!=null&&b7.$==1)b8!=null&&b8.$==1?b9!=null&&b9.$==1?b7.$0[1]&&b8.$0[1]&&b9.$0[1]?w.MarkForever(b3,bW(b7.$0[0],b8.$0[0],b9.$0[0])):w.MarkReady(b3,bW(b7.$0[0],b8.$0[0],b9.$0[0])):void 0:void 0;}}b0=bX.s;b1=bY.s;b2=bZ.s;return b0!=null&&b0.$==0?b1!=null&&b1.$==0?b2!=null&&b2.$==0?w.New({$:0,$0:bW(b0.$0,b1.$0,b2.$0)}):w.Map3Opt1(bW,b0.$0,b1.$0,bZ):b2!=null&&b2.$==0?w.Map3Opt2(bW,b0.$0,b2.$0,bY):w.Map3Opt3(bW,b0.$0,bY,bZ):b1!=null&&b1.$==0?b2!=null&&b2.$==0?w.Map3Opt4(bW,b1.$0,b2.$0,bX):w.Map3Opt5(bW,b1.$0,bX,bZ):b2!=null&&b2.$==0?w.Map3Opt6(bW,b2.$0,bX,bY):(b3=w.New({$:3,$0:[],$1:[]}),(w.When(bX,b4,b3),w.When(bY,b4,b3),w.When(bZ,b4,b3),b3));};w.Sequence=function(bW){var bX,bY,bZ;function b0(b1){var b2;if(bZ[0]===0){b2=o.map(function(b3){var b4;b4=b3.s;return b4!=null&&b4.$==0?b4.$0:b4!=null&&b4.$==2?b4.$0:g.FailWith("value not found by View.Sequence");},bX);if(o.forall(function(b3){var b4;b4=b3.s;return b4!=null&&b4.$==0;},bX))w.MarkForever(bY,b2);else w.MarkReady(bY,b2);}else bZ[0]=bZ[0]-1;}bX=o.ofSeq(bW);return bX.length==0?w.New({$:0,$0:[]}):(bY=w.New({$:3,$0:[],$1:[]}),(bZ=[o.length(bX)-1],(o.iter(function(b1){w.When(b1,b0,bY);},bX),bY)));};w.Map2=function(bW,bX,bY){var bZ,b0,b1;function b2(b3){var b4,b5,b6;if(!(b4=b1.s,b4!=null&&b4.$==0||b4!=null&&b4.$==2)){b5=w.ValueAndForever(bX);b6=w.ValueAndForever(bY);if(b5!=null&&b5.$==1)b6!=null&&b6.$==1?b5.$0[1]&&b6.$0[1]?w.MarkForever(b1,bW(b5.$0[0],b6.$0[0])):w.MarkReady(b1,bW(b5.$0[0],b6.$0[0])):void 0;}}bZ=bX.s;b0=bY.s;return bZ!=null&&bZ.$==0?b0!=null&&b0.$==0?w.New({$:0,$0:bW(bZ.$0,b0.$0)}):w.Map2Opt1(bW,bZ.$0,bY):b0!=null&&b0.$==0?w.Map2Opt2(bW,b0.$0,bX):(b1=w.New({$:3,$0:[],$1:[]}),(w.When(bX,b2,b1),w.When(bY,b2,b1),b1));};w.Map2Unit=function(bW,bX){var bY,bZ,b0;function b1(){var b2,b3,b4;if(!(b2=b0.s,b2!=null&&b2.$==0||b2!=null&&b2.$==2)){b3=w.ValueAndForever(bW);b4=w.ValueAndForever(bX);if(b3!=null&&b3.$==1)b4!=null&&b4.$==1?b3.$0[1]&&b4.$0[1]?w.MarkForever(b0,null):w.MarkReady(b0,null):void 0;}}bY=bW.s;bZ=bX.s;return bY!=null&&bY.$==0?bZ!=null&&bZ.$==0?w.New({$:0,$0:null}):bX:bZ!=null&&bZ.$==0?bW:(b0=w.New({$:3,$0:[],$1:[]}),(w.When(bW,b1,b0),w.When(bX,b1,b0),b0));};w.Copy=function(bW){var bX,bY,bZ;bX=bW.s;return bX==null?bW:bX!=null&&bX.$==2?(bY=w.New({$:2,$0:bX.$0,$1:[]}),(w.WhenObsolete(bW,bY),bY)):bX!=null&&bX.$==3?(bZ=w.New({$:3,$0:[],$1:[]}),(w.When(bW,function(b0){w.MarkDone(bZ,bW,b0);},bZ),bZ)):bW;};w.EnqueueSafe=function(bW,bX){var bY,bZ,b0,b1;bW.push(bX);if(bW.length%20===0){bY=bW.slice(0);bK.Clear(bW);for(bZ=0,b0=o.length(bY)-1;bZ<=b0;bZ++){b1=o.get(bY,bZ);if(typeof b1=="object")(function(b2){if(b2.s)bW.push(b2);}(b1));else(function(b2){bW.push(b2);}(b1));}}else void 0;};w.MarkForever=function(bW,bX){var bY,bZ,b0,b1;bY=bW.s;if(bY!=null&&bY.$==3){bW.s={$:0,$0:bX};bZ=bY.$0;for(b0=0,b1=o.length(bZ)-1;b0<=b1;b0++)(o.get(bZ,b0))(bX);}else void 0;};w.MarkReady=function(bW,bX){var bY,bZ,b0,b1;bY=bW.s;if(bY!=null&&bY.$==3){bW.s={$:2,$0:bX,$1:bY.$1};bZ=bY.$0;for(b0=0,b1=o.length(bZ)-1;b0<=b1;b0++)(o.get(bZ,b0))(bX);}else void 0;};w.Join=function(bW){var bX;bX=w.New({$:3,$0:[],$1:[]});w.When(bW,function(bY){var bZ;bZ=bY();w.When(bZ,function(b0){var b1,b2;if((b1=bZ.s,b1!=null&&b1.$==0)&&(b2=bW.s,b2!=null&&b2.$==0))w.MarkForever(bX,b0);else w.MarkReady(bX,b0);},bX);},bX);return bX;};w.Map3Opt1=function(bW,bX,bY,bZ){return w.Map(function(b0){return bW(bX,bY,b0);},bZ);};w.Map3Opt2=function(bW,bX,bY,bZ){return w.Map(function(b0){return bW(bX,b0,bY);},bZ);};w.Map3Opt3=function(bW,bX,bY,bZ){return w.Map2(function(b0,b1){return bW(bX,b0,b1);},bY,bZ);};w.Map3Opt4=function(bW,bX,bY,bZ){return w.Map(function(b0){return bW(b0,bX,bY);},bZ);};w.Map3Opt5=function(bW,bX,bY,bZ){return w.Map2(function(b0,b1){return bW(b0,bX,b1);},bY,bZ);};w.Map3Opt6=function(bW,bX,bY,bZ){return w.Map2(function(b0,b1){return bW(b0,b1,bX);},bY,bZ);};w.ValueAndForever=function(bW){var bX;bX=bW.s;return bX!=null&&bX.$==0?{$:1,$0:[bX.$0,true]}:bX!=null&&bX.$==2?{$:1,$0:[bX.$0,false]}:null;};w.Map2Opt1=function(bW,bX,bY){return w.Map(function(bZ){return bW(bX,bZ);},bY);};w.Map2Opt2=function(bW,bX,bY){return w.Map(function(bZ){return bW(bZ,bX);},bY);};w.WhenObsolete=function(bW,bX){var bY;bY=bW.s;if(bY==null)w.Obsolete(bX);else bY!=null&&bY.$==2?w.EnqueueSafe(bY.$1,bX):bY!=null&&bY.$==3?w.EnqueueSafe(bY.$1,bX):void 0;};y.NewGuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(new a.RegExp("[xy]","g"),function(bW){var bX,bY;bX=bU.random()*16|0;bY=bW=="x"?bX:bX&3|8;return bY.toString(16);});};z.$cctor=function(){z.$cctor=a.ignore;z.People=q.FromSeq(["John","Paul"]);};B.NewFromSeq=function(bW){var bX,bY,bZ;bX={};bY=V.Get(bW);try{while(bY.MoveNext()){bZ=bY.Current();bX[bZ[0]]=bZ[1];}}finally{if(typeof bY=="object"&&"Dispose"in bY)bY.Dispose();}return bX;};D.LoadLocalTemplates=function(bW){!D.LocalTemplatesLoaded()?(D.set_LocalTemplatesLoaded(true),D.LoadNestedTemplates(self.document.body,"")):void 0;D.LoadedTemplates().set_Item(bW,D.LoadedTemplateFile(""));};D.NamedTemplate=function(bW,bX,bY){var bZ,b0;bZ=(b0=null,[D.LoadedTemplateFile(bW).TryGetValue(bX==null?"":bX.$0,{get:function(){return b0;},set:function(b1){b0=b1;}}),b0]);return bZ[0]?D.ChildrenTemplate(bZ[1].cloneNode(true),bY):(bS.warn("Local template doesn't exist",bX),E.get_Empty());};D.LocalTemplatesLoaded=function(){Y.$cctor();return Y.LocalTemplatesLoaded;};D.set_LocalTemplatesLoaded=function(bW){Y.$cctor();Y.LocalTemplatesLoaded=bW;};D.LoadNestedTemplates=function(bW,bX){var bZ,b0,b1,b2,b3,b4,b5,b6,b7,b8,b9,b_,b$,ca,cb,cc,cd,ce,cf,cg,ch;function bY(ci){var cj,ck;if(!bZ.ContainsKey(ci)){cj=(ck=null,[b0.TryGetValue(ci,{get:function(){return ck;},set:function(cl){ck=cl;}}),ck]);if(cj[0]){ch.SAdd(ci);b0.RemoveKey(ci);D.PrepareTemplateStrict(bX,{$:1,$0:ci},cj[1],{$:1,$0:bY});}else bS.warn(ch.Contains(ci)?"Encountered loop when instantiating "+ci:"Local template does not exist: "+ci);}}bZ=D.LoadedTemplateFile(bX);b0=new I.New$5();b1=bW.querySelectorAll("[ws-template]");for(b2=0,b3=b1.length-1;b2<=b3;b2++){b4=b1[b2];b5=b4.getAttribute("ws-template").toLowerCase();b4.removeAttribute("ws-template");b0.set_Item(b5,D.FakeRootSingle(b4));}b6=bW.querySelectorAll("[ws-children-template]");for(b7=0,b8=b6.length-1;b7<=b8;b7++){b9=b6[b7];b_=b9.getAttribute("ws-children-template").toLowerCase();b9.removeAttribute("ws-children-template");b0.set_Item(b_,D.FakeRoot(b9));}b$=bW.querySelectorAll("template[id]");for(ca=0,cb=b$.length-1;ca<=cb;ca++){cc=b$[ca];b0.set_Item(cc.getAttribute("id").toLowerCase(),D.FakeRootFromHTMLTemplate(cc));}cd=bW.querySelectorAll("template[name]");for(ce=0,cf=cd.length-1;ce<=cf;ce++){cg=cd[ce];b0.set_Item(cg.getAttribute("name").toLowerCase(),D.FakeRootFromHTMLTemplate(cg));}ch=new Q.New$3();while(b0.count>0)bY(R.head(b0.Keys()));};D.LoadedTemplates=function(){Y.$cctor();return Y.LoadedTemplates;};D.LoadedTemplateFile=function(bW){var bX,bY,bZ;bX=(bY=null,[D.LoadedTemplates().TryGetValue(bW,{get:function(){return bY;},set:function(b0){bY=b0;}}),bY]);return bX[0]?bX[1]:(bZ=new I.New$5(),(D.LoadedTemplates().set_Item(bW,bZ),bZ));};D.ChildrenTemplate=function(bW,bX){var bY,bZ,b0,b1,b2;bY=D.InlineTemplate(bW,R.append(bX,D.GlobalHoles().Values()));bZ=bY[1];b0=bY[0];b1=b0.Els;return!r.Equals(b1,null)&&b1.length===1&&(o.get(b1,0)instanceof J&&(r.Equals(o.get(b1,0).nodeType,J.ELEMENT_NODE)&&(b2=o.get(b1,0),true)))?_4.TreeNode(b0,bZ):E.Mk({$:6,$0:b0},bZ);};D.FakeRootSingle=function(bW){var bX,bY,bZ,b0;bW.removeAttribute("ws-template");bX=bW.getAttribute("ws-replace");if(bX===null);else{bW.removeAttribute("ws-replace");bY=bW.parentNode;r.Equals(bY,null)?void 0:(bZ=self.document.createElement(bW.tagName),bZ.setAttribute("ws-replace",bX),bY.replaceChild(bZ,bW));}b0=self.document.createElement("div");b0.appendChild(bW);return b0;};D.FakeRoot=function(bW){var bX;bX=self.document.createElement("div");while(bW.hasChildNodes())bX.appendChild(bW.firstChild);return bX;};D.FakeRootFromHTMLTemplate=function(bW){var bX,bY,bZ,b0;bX=self.document.createElement("div");bY=bW.content;for(bZ=0,b0=bY.childNodes.length-1;bZ<=b0;bZ++)bX.appendChild(bY.childNodes[bZ].cloneNode(true));return bX;};D.PrepareTemplateStrict=function(bW,bX,bY,bZ){var b0,b1;function b2(b8,b9){var b_,b$,ca,cb,cc,ce,cf,cg,ch,ci,cj,ck,cl,cm,cn,co,cp,cq,cr,cs,ct,cu,cv,cw,cx,cy;function cd(cz){}while(true)switch(b8){case 0:if(b9!==null){b_=b9.nextSibling;if(r.Equals(b9.nodeType,J.TEXT_NODE))_6.convertTextNode(b9);else if(r.Equals(b9.nodeType,J.ELEMENT_NODE))b4(b9);b9=b_;}else return null;break;case 1:ce=_7.string(b9.nodeName,{$:1,$0:3},null).toLowerCase();cf=(b$=ce.indexOf("."),b$===-1?[bW,ce]:[_7.string(ce,null,{$:1,$0:b$-1}),_7.string(ce,{$:1,$0:b$+1},null)]);cg=cf[1];ch=cf[0];if(ch!==""&&!D.LoadedTemplates().ContainsKey(ch))return _6.failNotLoaded(cg);else{if(ch===""&&bZ!=null)bZ.$0(cg);ci=D.LoadedTemplates().Item(ch);if(!ci.ContainsKey(cg))return _6.failNotLoaded(cg);else{cj=ci.Item(cg);ck=cj.cloneNode(true);cl=new Q.New$3();cm=new I.New$5();cn=b9.attributes;for(co=0,cp=cn.length-1;co<=cp;co++){cq=cn.item(co).name.toLowerCase();cm.set_Item(cq,(cr=cn.item(co).nodeValue,cr===""?cq:cr.toLowerCase()));if(!cl.SAdd(cq))bS.warn("Hole mapped twice",cq);}for(cs=0,ct=b9.childNodes.length-1;cs<=ct;cs++){cu=b9.childNodes[cs];if(r.Equals(cu.nodeType,J.ELEMENT_NODE))!cl.SAdd(cu.nodeName.toLowerCase())?bS.warn("Hole filled twice",cg):void 0;}cv=b9.childNodes.length===1&&r.Equals(b9.firstChild.nodeType,J.TEXT_NODE);if(cv){cb=_6.fillTextHole(ck,b9.firstChild.textContent,cg);((function(cz){return function(cA){if(cA!=null)cz(cA.$0);};}((cc=function(cz){return function(cA){return cz.SAdd(cA);};}(cl),function(cz){return cd(cc(cz));})))(cb));}_6.removeHolesExcept(ck,cl);if(!cv){for(cw=0,cx=b9.childNodes.length-1;cw<=cx;cw++){cy=b9.childNodes[cw];if(r.Equals(cy.nodeType,J.ELEMENT_NODE))cy.hasAttributes()?_6.fillInstanceAttrs(ck,cy):b3(ck,cy);}}_6.mapHoles(ck,cm);_6.fill(ck,b9.parentNode,b9);b9.parentNode.removeChild(b9);return;}}break;}}function b3(b8,b9){var b_,b$,cb,cc;function ca(cd,ce){var cf;if(cb==="title"&&b9.hasChildNodes()){cf=_8.ParseHTMLIntoFakeRoot(b9.textContent);b9.removeChild(b9.firstChild);while(cf.hasChildNodes())b9.appendChild(cf.firstChild);}else null;b4(b9);return _6.fill(b9,cd,ce);}cb=b9.nodeName.toLowerCase();D.foreachNotPreserved(b8,"[ws-attr-holes]",function(cd){var ce,cf,cg,ch,ci;ce=bj.SplitChars(cd.getAttribute("ws-attr-holes"),[" "],1);for(cf=0,cg=ce.length-1;cf<=cg;cf++){ch=o.get(ce,cf);cd.setAttribute(ch,(ci=new a.RegExp("\\${"+cb+"}","ig"),cd.getAttribute(ch).replace(ci,b9.textContent)));}});cc=b8.querySelector("[ws-hole="+cb+"]");if(r.Equals(cc,null)){b_=b8.querySelector("[ws-replace="+cb+"]");return r.Equals(b_,null)?(b$=b8.querySelector("slot[name="+cb+"]"),b8.tagName.toLowerCase()==="template"?(ca(b$.parentNode,b$),void b$.parentNode.removeChild(b$)):null):(ca(b_.parentNode,b_),void b_.parentNode.removeChild(b_));}else{while(cc.hasChildNodes())cc.removeChild(cc.lastChild);cc.removeAttribute("ws-hole");return ca(cc,null);}}function b4(b8){if(!b8.hasAttribute("ws-preserve"))if(bj.StartsWith(b8.nodeName.toLowerCase(),"ws-"))b6(b8);else{_6.convertAttrs(b8);b5(b8.firstChild);}}function b5(b8){return b2(0,b8);}function b6(b8){return b2(1,b8);}function b7(b8){var b9,b_,b$,ca,cb,cc,cd,ce,cf,cg,ch,ci;while(true){b9=b8.querySelector("[ws-template]");if(r.Equals(b9,null)){b_=b8.querySelector("[ws-children-template]");if(r.Equals(b_,null)){b$=b8.querySelectorAll("template[id]");for(ca=1,cb=b$.length-1;ca<=cb;ca++){cc=b$[ca];if(b0.Contains(cc));else{D.PrepareTemplateStrict(bW,{$:1,$0:cc.getAttribute("id")},cc,null);b0.SAdd(cc);}}cd=b8.querySelectorAll("template[name]");for(ce=1,cf=cd.length-1;ce<=cf;ce++){cg=cd[ce];if(b0.Contains(cg));else{D.PrepareTemplateStrict(bW,{$:1,$0:cg.getAttribute("name")},cg,null);b0.SAdd(cg);}}return null;}else{ch=b_.getAttribute("ws-children-template");b_.removeAttribute("ws-children-template");D.PrepareTemplateStrict(bW,{$:1,$0:ch},b_,null);b8=b8;}}else{ci=b9.getAttribute("ws-template");(D.PrepareSingleTemplate(bW,{$:1,$0:ci},b9))(null);b8=b8;}}}b0=new Q.New$3();b1=(bX==null?"":bX.$0).toLowerCase();D.LoadedTemplateFile(bW).set_Item(b1,bY);if(bY.hasChildNodes()){b7(bY);b5(bY.firstChild);}};D.InlineTemplate=function(bW,bX){var bY,bZ,b0,b1,b2,b6,b7,b8,b9,b_,b$,ca;function b3(cb,cc){var cd,ce,cf;cd=bf.Insert(cb,cc);b7.push(bf.Updates(cd));b8.push([cb,cd]);ce=bT.GetOptional(cd.OnAfterRender);return ce==null?null:(cf=ce.$0,void b9.push(function(){cf(cb);}));}function b4(cb){var cc,cd;cc=(cd=null,[b_.TryGetValue(cb,{get:function(){return cd;},set:function(ce){cd=ce;}}),cd]);return cc[0]?cc[1].$==0?{$:1,$0:cc[1].$1}:cc[1].$==1?{$:1,$0:E.TextNode(cc[1].$1)}:cc[1].$==2?{$:1,$0:E.TextView(cc[1].$1)}:cc[1].$==10?{$:1,$0:E.TextView(cc[1].$1.get_View())}:cc[1].$==11?{$:1,$0:E.TextView(K.Map(a.String,cc[1].$1.get_View()))}:cc[1].$==12?{$:1,$0:E.TextView(K.Map(function(ce){return(new a.Date(ce)).toLocaleString();},cc[1].$1.get_View()))}:cc[1].$==13?{$:1,$0:E.TextView(K.Map(a.String,cc[1].$1.get_View()))}:cc[1].$==15?{$:1,$0:E.TextView(K.Map(function(ce){return ce.get_Input();},cc[1].$1.get_View()))}:cc[1].$==16?{$:1,$0:E.TextView(K.Map(a.String,cc[1].$1.get_View()))}:cc[1].$==17?{$:1,$0:E.TextView(K.Map(function(ce){return ce.get_Input();},cc[1].$1.get_View()))}:cc[1].$==18?{$:1,$0:E.TextView(K.Map(a.String,cc[1].$1.get_View()))}:(bS.warn("Content hole filled with attribute data",cb),null):null;}function b5(){D.foreachNotPreservedwsDOM("[ws-dom]",function(cb){var cc,cd,ce,cf,cg,ch;cc=(cd=null,[b_.TryGetValue(cb.getAttribute("ws-dom").toLowerCase(),{get:function(){return cd;},set:function(ci){cd=ci;}}),cd]);if(cc[0])cc[1].$==14?(ce=cc[1].$1,cb.removeAttribute("ws-dom"),cf=cb,cg=new a.MutationObserver(function(ci,cj){o.iter(function(ck){function cl(cm,cn,co,cp){if(cm===cf&&ck.addedNodes.length!==1){ce.SetFinal(null);cj.disconnect();}}ck.removedNodes.forEach(bT.CreateFuncWithArgs(function(cm){return cl(cm[0],cm[1],cm[2],cm[3]);}),null);},ci);}),cb.parentElement!==null?cg.observe(cb.parentElement,(ch={},ch.childList=true,ch)):void 0,ce.Set({$:1,$0:cb}),K.Sink(function(ci){var cj;if(ci!=null&&ci.$==1){cj=ci.$0;if(cf===cj);else{cf.replaceWith.apply(cf,[cj]);cf=cj;}}else{cf.remove();cg.disconnect();}},ce.get_View())):void 0;});}b6=[];b7=[];b8=[];b9=[];b_=new I.New$5();b$=V.Get(bX);try{while(b$.MoveNext()){ca=b$.Current();b_.set_Item(ca.$0,ca);}}finally{if(typeof b$=="object"&&"Dispose"in b$)b$.Dispose();}bY=_8.ChildrenArray(bW);D.foreachNotPreserved(bW,"[ws-hole]",function(cb){var cc,cd,ce;ce=cb.getAttribute("ws-hole");cb.removeAttribute("ws-hole");while(cb.hasChildNodes())cb.removeChild(cb.lastChild);cc=b4(ce);if(cc!=null&&cc.$==1){cd=cc.$0;Z.LinkElement(cb,cd.docNode);b6.push(_1.New(bf.Empty(cb),cd.docNode,null,cb,G.Int(),null));b7.push(cd.updates);}});D.foreachNotPreserved(bW,"[ws-replace]",function(cb){var cc,cd,ce,cf,cg,ch;cc=b4(cb.getAttribute("ws-replace"));if(cc!=null&&cc.$==1){cd=cc.$0;ce=cb.parentNode;cf=self.document.createTextNode("");ce.replaceChild(cf,cb);cg=Z.InsertBeforeDelim(cf,cd.docNode);ch=o.tryFindIndex(function(ci){return cb===ci;},bY);ch==null?void 0:o.set(bY,ch.$0,cd.docNode);b6.push(_1.New(bf.Empty(ce),cd.docNode,{$:1,$0:[cg,cf]},ce,G.Int(),null));b7.push(cd.updates);}});bZ=false;D.foreachNotPreserved(bW,"slot",function(cb){var cc,cd,ce,cf;ce=cb.getAttribute("name");cf=ce===""||ce===null?"default":ce.toLowerCase();if(bZ&&cf==="default"||!r.Equals(bW.parentElement,null))void 0;else{while(cb.hasChildNodes())cb.removeChild(cb.lastChild);if(cf==="default")bZ=true;cc=b4(cf);if(cc!=null&&cc.$==1){cd=cc.$0;Z.LinkElement(cb,cd.docNode);b6.push(_1.New(bf.Empty(cb),cd.docNode,null,cb,G.Int(),null));b7.push(cd.updates);}}});D.foreachNotPreserved(bW,"[ws-attr]",function(cb){var cc,cd,ce;cc=cb.getAttribute("ws-attr");cb.removeAttribute("ws-attr");cd=(ce=null,[b_.TryGetValue(cc,{get:function(){return ce;},set:function(cf){ce=cf;}}),ce]);if(cd[0])cd[1].$==3?b3(cb,cd[1].$1):bS.warn("Attribute hole filled with non-attribute data",cc);});D.foreachNotPreserved(bW,"[ws-on]",function(cb){b3(cb,M.Concat(o.choose(function(cc){var cd,ce,cf;cd=bj.SplitChars(cc,[":"],1);ce=(cf=null,[b_.TryGetValue(o.get(cd,1),{get:function(){return cf;},set:function(cg){cf=cg;}}),cf]);return ce[0]?ce[1].$==4?{$:1,$0:bg.Handler(o.get(cd,0),ce[1].$1)}:ce[1].$==5?{$:1,$0:M.Handler(o.get(cd,0),ce[1].$1)}:(bS.warn("Event hole on"+o.get(cd,0)+" filled with non-event data",o.get(cd,1)),null):null;},bj.SplitChars(cb.getAttribute("ws-on"),[" "],1))));cb.removeAttribute("ws-on");});D.foreachNotPreserved(bW,"[ws-onafterrender]",function(cb){var cc,cd,ce;cc=cb.getAttribute("ws-onafterrender");cd=(ce=null,[b_.TryGetValue(cc,{get:function(){return ce;},set:function(cf){ce=cf;}}),ce]);if(cd[0])cd[1].$==7?(cb.removeAttribute("ws-onafterrender"),b3(cb,bg.OnAfterRender(cd[1].$1))):cd[1].$==8?(cb.removeAttribute("ws-onafterrender"),b3(cb,bg.OnAfterRender(cd[1].$1))):bS.warn("onafterrender hole filled with non-onafterrender data",cc);});D.foreachNotPreserved(bW,"[ws-var]",function(cb){var cc,cd,ce;cc=cb.getAttribute("ws-var");cb.removeAttribute("ws-var");cd=(ce=null,[b_.TryGetValue(cc,{get:function(){return ce;},set:function(cf){ce=cf;}}),ce]);if(cd[0])cd[1].$==10?b3(cb,bg.Value(cd[1].$1)):cd[1].$==11?b3(cb,bg.Checked(cd[1].$1)):cd[1].$==12?b3(cb,bg.DateTimeValue(cd[1].$1)):cd[1].$==13?b3(cb,bg.FileValue(cd[1].$1)):cd[1].$==15?b3(cb,bg.IntValue(cd[1].$1)):cd[1].$==16?b3(cb,bg.IntValueUnchecked(cd[1].$1)):cd[1].$==17?b3(cb,bg.FloatValue(cd[1].$1)):cd[1].$==18?b3(cb,bg.FloatValueUnchecked(cd[1].$1)):bS.warn("Var hole filled with non-Var data",cc);});D.foreachNotPreserved(bW,"[ws-attr-holes]",function(cb){var cc,cd,ce,cf;cc=new a.RegExp(D.TextHoleRE(),"g");cd=bj.SplitChars(cb.getAttribute("ws-attr-holes"),[" "],1);cb.removeAttribute("ws-attr-holes");for(ce=0,cf=cd.length-1;ce<=cf;ce++)(function(){var cg,ch,ci,cj,ck,cl,cm,cn,co,cp,cq,cr,cs;cp=o.get(cd,ce);cq=cb.getAttribute(cp);cg=null;ch=0;cr=[];while(cg=cc.exec(cq),cg!==null){cs=_7.string(cq,{$:1,$0:ch},{$:1,$0:cc.lastIndex-o.get(cg,0).length-1});ch=cc.lastIndex;cr.push([cs,o.get(cg,1)]);}cj=_7.string(cq,{$:1,$0:ch},null);cc.lastIndex=0;ck=o.foldBack(function(ct,cu){return(function(cv){var cw,cx;cw=cv[0];cx=cv[1];return function(cy){var cz,cA,cB,cC,cD;cz=cy[0];cA=cy[1];cB=(cC=(cD=null,[b_.TryGetValue(cx,{get:function(){return cD;},set:function(cE){cD=cE;}}),cD]),cC[0]?cC[1].$==1?{$:0,$0:cC[1].$1}:cC[1].$==2?{$:1,$0:cC[1].$1}:cC[1].$==10?{$:1,$0:cC[1].$1.get_View()}:cC[1].$==11?{$:1,$0:K.Map(a.String,cC[1].$1.get_View())}:cC[1].$==12?{$:1,$0:K.Map(function(cE){return(new a.Date(cE)).toLocaleString();},cC[1].$1.get_View())}:cC[1].$==13?{$:1,$0:K.Map(a.String,cC[1].$1.get_View())}:cC[1].$==15?{$:1,$0:K.Map(function(cE){return cE.get_Input();},cC[1].$1.get_View())}:cC[1].$==16?{$:1,$0:K.Map(a.String,cC[1].$1.get_View())}:cC[1].$==17?{$:1,$0:K.Map(function(cE){return cE.get_Input();},cC[1].$1.get_View())}:cC[1].$==18?{$:1,$0:K.Map(a.String,cC[1].$1.get_View())}:(bS.warn("Attribute value hole filled with non-text data",cx),{$:0,$0:""}):{$:0,$0:""});return cB.$==1?[cw,new bi({$:1,$0:cz===""?cB.$0:K.Map(function(cE){return cE+cz;},cB.$0),$1:cA})]:[cw+cB.$0+cz,cA];};}(ct))(cu);},cr,[cj,bi.Empty]);return b3(cb,ck[1].$==1?ck[1].$1.$==1?ck[1].$1.$1.$==1?ck[1].$1.$1.$1.$==0?(cl=ck[0],bg.Dynamic(cp,K.Map3(function(ct,cu,cv){return cl+ct+cu+cv;},ck[1].$0,ck[1].$1.$0,ck[1].$1.$1.$0))):(cm=ck[0],bg.Dynamic(cp,K.Map(function(ct){return cm+bj.concat("",ct);},K.Sequence(ck[1])))):(cn=ck[0],bg.Dynamic(cp,K.Map2(function(ct,cu){return cn+ct+cu;},ck[1].$0,ck[1].$1.$0))):ck[0]===""?bg.Dynamic(cp,ck[1].$0):(co=ck[0],bg.Dynamic(cp,K.Map(function(ct){return co+ct;},ck[1].$0))):M.Create(cp,ck[0]));}());});return[bT.DeleteEmptyFields({Els:bY,Dirty:true,Holes:b6,Attrs:b8,Render:(b0=b9.length==0?{$:1,$0:function(){b5();}}:{$:1,$0:function(cb){b5();o.iter(function(cc){cc(cb);},b9);}},b0?b0.$0:void 0),El:(b1=!r.Equals(bY,null)&&bY.length===1&&(o.get(bY,0)instanceof J&&(o.get(bY,0)instanceof _5&&(b2=o.get(bY,0),true)))?{$:1,$0:b2}:null,b1?b1.$0:void 0)},["Render","El"]),bd.TreeReduce(K.Const(),K.Map2Unit,b7)];};D.GlobalHoles=function(){Y.$cctor();return Y.GlobalHoles;};D.foreachNotPreserved=function(bW,bX,bY){_8.IterSelector(bW,bX,function(bZ){if(bZ.closest("[ws-preserve]")==null)bY(bZ);});};D.PrepareSingleTemplate=function(bW,bX,bY){var bZ;bZ=D.FakeRootSingle(bY);return function(b0){D.PrepareTemplateStrict(bW,bX,bZ,b0);};};D.foreachNotPreservedwsDOM=function(bW,bX){_8.IterSelectorDoc(bW,function(bY){if(bY.closest("[ws-preserve]")==null)bX(bY);});};D.TextHoleRE=function(){Y.$cctor();return Y.TextHoleRE;};E=i.Doc=bT.Class({},h,E);E.RunById=function(bW,bX){var bY;bY=self.document.getElementById(bW);if(r.Equals(bY,null))g.FailWith("invalid id: "+bW);else E.Run(bY,bX);};E.Convert=function(bW,bX){return E.Flatten(K.MapSeqCached(bW,bX));};E.Run=function(bW,bX){Z.LinkElement(bW,bX.docNode);E.RunInPlace(false,bW,bX);};E.Flatten=function(bW){return E.EmbedView(K.Map(E.Concat,bW));};E.get_Empty=function(){return E.Mk(null,K.Const());};E.RunInPlace=function(bW,bX,bY){var bZ;bZ=Z.CreateRunState(bX,bY.docNode);K.Sink(_.get_UseAnimations()||$.BatchUpdatesEnabled()?ba.StartProcessor(Z.PerformAnimatedUpdate(bW,bZ,bY.docNode)):function(){Z.PerformSyncUpdate(bW,bZ,bY.docNode);},bY.updates);};E.Concat=function(bW){var bX;bX=bd.ofSeqNonCopying(bW);return bd.TreeReduce(E.get_Empty(),E.Append,bX);};E.EmbedView=function(bW){var bX;bX=Z.CreateEmbedNode();return E.Mk({$:2,$0:bX},K.Map(a.ignore,K.Bind(function(bY){Z.UpdateEmbedNode(bX,bY.docNode);return bY.updates;},bW)));};E.Mk=function(bW,bX){return new E.New(bW,bX);};E.Append=function(bW,bX){return E.Mk({$:0,$0:bW.docNode,$1:bX.docNode},K.Map2Unit(bW.updates,bX.updates));};E.TextNode=function(bW){return E.Mk({$:5,$0:self.document.createTextNode(bW)},K.Const());};E.TextView=function(bW){var bX;bX=Z.CreateTextNode();return E.Mk({$:4,$0:bX},K.Map(function(bY){Z.UpdateTextNode(bX,bY);},bW));};E.New=bT.Ctor(function(bW,bX){h.New.call(this);this.docNode=bW;this.updates=bX;},E);G.Int=function(){G.set_counter(G.counter()+1);return G.counter();};G.set_counter=function(bW){_0.$cctor();_0.counter=bW;};G.counter=function(){_0.$cctor();return _0.counter;};I=H.Dictionary=bT.Class({set_Item:function(bW,bX){this.set(bW,bX);},set:function(bW,bX){var bY,bZ,b0,b1;bY=this;bZ=this.hash(bW);b0=this.data[bZ];if(b0==null){this.count=this.count+1;this.data[bZ]=new a.Array({K:bW,V:bX});}else{b1=o.tryFindIndex(function(b2){return bY.equals.apply(null,[(g.KeyValue(b2))[0],bW]);},b0);b1==null?(this.count=this.count+1,b0.push({K:bW,V:bX})):b0[b1.$0]={K:bW,V:bX};}},TryGetValue:function(bW,bX){var bY,bZ,b0;bY=this;bZ=this.data[this.hash(bW)];return bZ==null?false:(b0=o.tryPick(function(b1){var b2;b2=g.KeyValue(b1);return bY.equals.apply(null,[b2[0],bW])?{$:1,$0:b2[1]}:null;},bZ),b0!=null&&b0.$==1&&(bX.set(b0.$0),true));},RemoveKey:function(bW){return this.remove(bW);},ContainsKey:function(bW){var bX,bY;bX=this;bY=this.data[this.hash(bW)];return bY==null?false:o.exists(function(bZ){return bX.equals.apply(null,[(g.KeyValue(bZ))[0],bW]);},bY);},Keys:function(){return new _9.New(this);},GetEnumerator:function(){return V.Get0(o.concat(T.GetFieldValues(this.data)));},Values:function(){return new bl.New(this);},remove:function(bW){var bX,bY,bZ,b0;bX=this;bY=this.hash(bW);bZ=this.data[bY];return bZ==null?false:(b0=o.filter(function(b1){return!bX.equals.apply(null,[(g.KeyValue(b1))[0],bW]);},bZ),o.length(b0)<bZ.length&&(this.count=this.count-1,this.data[bY]=b0,true));},Item:function(bW){return this.get(bW);},get:function(bW){var bX,bY;bX=this;bY=this.data[this.hash(bW)];return bY==null?U.notPresent():o.pick(function(bZ){var b0;b0=g.KeyValue(bZ);return bX.equals.apply(null,[b0[0],bW])?{$:1,$0:b0[1]}:null;},bY);}},h,I);I.New$5=bT.Ctor(function(){I.New$6.call(this,[],r.Equals,r.Hash);},I);I.New$6=bT.Ctor(function(bW,bX,bY){var bZ,b0;h.New.call(this);this.equals=bX;this.hash=bY;this.count=0;this.data=[];bZ=V.Get(bW);try{while(bZ.MoveNext()){b0=bZ.Current();this.set(b0.K,b0.V);}}finally{if(typeof bZ=="object"&&"Dispose"in bZ)bZ.Dispose();}},I);K=i.View=bT.Class({},null,K);w.Obsolete=function(bW){var bX,bY,bZ,b0,b1;bY=bW.s;if(bY==null||(bY!=null&&bY.$==2?(bX=bY.$1,false):bY!=null&&bY.$==3?(bX=bY.$1,false):true))void 0;else{bW.s=null;for(bZ=0,b0=o.length(bX)-1;bZ<=b0;bZ++){b1=o.get(bX,bZ);if(typeof b1=="object")(function(b2){w.Obsolete(b2);}(b1));else b1();}}};w.New=function(bW){return{s:bW};};q.FromSeq=function(bW){return q.Create(a.id,bW);};q.Create=function(bW,bX){return q.CreateWithStorage(bW,_3.InMemory(o.ofSeq(bX)));};q.CreateWithStorage=function(bW,bX){return new q.New(bW,bX);};M=i.AttrProxy=bT.Class({},null,M);M.Handler=function(bW,bX){return M.HandlerImpl(bW,bX);};M.Concat=function(bW){var bX;bX=bd.ofSeqNonCopying(bW);return bd.TreeReduce(bf.EmptyAttr(),M.Append,bX);};M.Create=function(bW,bX){return bf.Static(function(bY){bY.setAttribute(bW,bX);});};M.HandlerImpl=function(bW,bX){return bf.Static(function(bY){bY.addEventListener(bW,function(bZ){return(bX(bY))(bZ);},false);});};M.Append=function(bW,bX){return bf.AppendTree(bW,bX);};O=i.CheckedInput=bT.Class({get_Input:function(){return this.$==1?this.$0:this.$==2?this.$0:this.$1;}},null,O);P.TryParseInt32=function(bW,bX){return P.TryParse(bW,-2147483648,2147483647,bX);};Q=H.HashSet=bT.Class({SAdd:function(bW){return this.add(bW);},Contains:function(bW){var bX;bX=this.data[this.hash(bW)];return bX==null?false:this.arrContains(bW,bX);},add:function(bW){var bX,bY;bX=this.hash(bW);bY=this.data[bX];return bY==null?(this.data[bX]=[bW],this.count=this.count+1,true):this.arrContains(bW,bY)?false:(bY.push(bW),this.count=this.count+1,true);},arrContains:function(bW,bX){var bY,bZ,b0,b1;bY=true;bZ=0;b1=bX.length;while(bY&&bZ<b1)if(this.equals.apply(null,[bX[bZ],bW]))bY=false;else bZ=bZ+1;return!bY;},GetEnumerator:function(){return V.Get(bs.concat(this.data));},ExceptWith:function(bW){var bX;bX=V.Get(bW);try{while(bX.MoveNext())this.Remove(bX.Current());}finally{if(typeof bX=="object"&&"Dispose"in bX)bX.Dispose();}},Count:function(){return this.count;},IntersectWith:function(bW){var bX,bY,bZ,b0,b1;bX=new Q.New$4(bW,this.equals,this.hash);bY=bs.concat(this.data);for(bZ=0,b0=bY.length-1;bZ<=b0;bZ++){b1=bY[bZ];if(!bX.Contains(b1))this.Remove(b1);}},Remove:function(bW){var bX;bX=this.data[this.hash(bW)];return bX==null?false:this.arrRemove(bW,bX)&&(this.count=this.count-1,true);},CopyTo:function(bW,bX){var bY,bZ,b0;bY=bs.concat(this.data);for(bZ=0,b0=bY.length-1;bZ<=b0;bZ++)o.set(bW,bZ+bX,bY[bZ]);},arrRemove:function(bW,bX){var bY,bZ,b0,b1;bY=true;bZ=0;b1=bX.length;while(bY&&bZ<b1)if(this.equals.apply(null,[bX[bZ],bW])){bX.splice.apply(bX,[bZ,1]);bY=false;}else bZ=bZ+1;return!bY;}},h,Q);Q.New$3=bT.Ctor(function(){Q.New$4.call(this,[],r.Equals,r.Hash);},Q);Q.New$4=bT.Ctor(function(bW,bX,bY){var bZ;h.New.call(this);this.equals=bX;this.hash=bY;this.data=[];this.count=0;bZ=V.Get(bW);try{while(bZ.MoveNext())this.add(bZ.Current());}finally{if(typeof bZ=="object"&&"Dispose"in bZ)bZ.Dispose();}},Q);Q.New$2=bT.Ctor(function(bW){Q.New$4.call(this,bW,r.Equals,r.Hash);},Q);R.append=function(bW,bX){return{GetEnumerator:function(){var bY,bZ;bY=V.Get(bW);bZ=[true];return new W.New(bY,null,function(b0){var b1;return b0.s.MoveNext()?(b0.c=b0.s.Current(),true):(b1=b0.s,!r.Equals(b1,null)?b1.Dispose():void 0,b0.s=null,bZ[0]&&(bZ[0]=false,b0.s=V.Get(bX),b0.s.MoveNext()?(b0.c=b0.s.Current(),true):(b0.s.Dispose(),b0.s=null,false)));},function(b0){var b1;b1=b0.s;if(!r.Equals(b1,null))b1.Dispose();});}};};R.head=function(bW){var bX;bX=V.Get(bW);try{return bX.MoveNext()?bX.Current():R.insufficient();}finally{if(typeof bX=="object"&&"Dispose"in bX)bX.Dispose();}};R.fold=function(bW,bX,bY){var bZ,b0;bZ=bX;b0=V.Get(bY);try{while(b0.MoveNext())bZ=bW(bZ,b0.Current());return bZ;}finally{if(typeof b0=="object"&&"Dispose"in b0)b0.Dispose();}};R.distinctBy=function(bW,bX){return{GetEnumerator:function(){var bY,bZ;bY=V.Get(bX);bZ=new Q.New$3();return new W.New(null,null,function(b0){var b1,b2;if(bY.MoveNext()){b1=bY.Current();b2=bZ.SAdd(bW(b1));while(!b2&&bY.MoveNext()){b1=bY.Current();b2=bZ.SAdd(bW(b1));}return b2&&(b0.c=b1,true);}else return false;},function(){bY.Dispose();});}};};R.iter=function(bW,bX){var bY;bY=V.Get(bX);try{while(bY.MoveNext())bW(bY.Current());}finally{if(typeof bY=="object"&&"Dispose"in bY)bY.Dispose();}};R.map=function(bW,bX){return{GetEnumerator:function(){var bY;bY=V.Get(bX);return new W.New(null,null,function(bZ){return bY.MoveNext()&&(bZ.c=bW(bY.Current()),true);},function(){bY.Dispose();});}};};R.delay=function(bW){return{GetEnumerator:function(){return V.Get(bW());}};};R.max=function(bW){var bX,bY,bZ;bX=V.Get(bW);try{if(!bX.MoveNext())R.seqEmpty();bY=bX.Current();while(bX.MoveNext()){bZ=bX.Current();if(r.Compare(bZ,bY)===1)bY=bZ;}return bY;}finally{if(typeof bX=="object"&&"Dispose"in bX)bX.Dispose();}};R.init=function(bW,bX){return R.take(bW,R.initInfinite(bX));};R.seqEmpty=function(){return g.FailWith("The input sequence was empty.");};R.forall=function(bW,bX){return!R.exists(function(bY){return!bW(bY);},bX);};R.take=function(bW,bX){bW<0?R.nonNegative():void 0;return{GetEnumerator:function(){var bY;bY=[V.Get(bX)];return new W.New(0,null,function(bZ){var b0;bZ.s=bZ.s+1;return bZ.s>bW?false:(b0=bY[0],r.Equals(b0,null)?R.insufficient():b0.MoveNext()?(bZ.c=b0.Current(),bZ.s===bW?(b0.Dispose(),bY[0]=null):void 0,true):(b0.Dispose(),bY[0]=null,R.insufficient()));},function(){var bZ;bZ=bY[0];if(!r.Equals(bZ,null))bZ.Dispose();});}};};R.initInfinite=function(bW){return{GetEnumerator:function(){return new W.New(0,null,function(bX){bX.c=bW(bX.s);bX.s=bX.s+1;return true;},void 0);}};};R.exists=function(bW,bX){var bY,bZ;bY=V.Get(bX);try{bZ=false;while(!bZ&&bY.MoveNext())bZ=bW(bY.Current());return bZ;}finally{if(typeof bY=="object"&&"Dispose"in bY)bY.Dispose();}};o.choose=function(bW,bX){var bY,bZ,b0,b1;bY=[];for(bZ=0,b0=bX.length-1;bZ<=b0;bZ++){b1=bW(bX[bZ]);if(b1==null);else bY.push(b1.$0);}return bY;};o.tryFindIndex=function(bW,bX){var bY,bZ;bY=null;bZ=0;while(bZ<bX.length&&bY==null){bW(bX[bZ])?bY={$:1,$0:bZ}:void 0;bZ=bZ+1;}return bY;};o.tryPick=function(bW,bX){var bY,bZ,b0;bY=null;bZ=0;while(bZ<bX.length&&bY==null){b0=bW(bX[bZ]);if(b0!=null&&b0.$==1)bY=b0;bZ=bZ+1;}return bY;};o.exists=function(bW,bX){var bY,bZ,b0,b1;bY=false;bZ=0;b1=o.length(bX);while(!bY&&bZ<b1)if(bW(bX[bZ]))bY=true;else bZ=bZ+1;return bY;};o.concat=function(bW){return a.Array.prototype.concat.apply([],o.ofSeq(bW));};o.ofSeq=function(bW){var bX,bY;if(bW instanceof a.Array)return bW.slice();else if(bW instanceof bi)return o.ofList(bW);else{bX=[];bY=V.Get(bW);try{while(bY.MoveNext())bX.push(bY.Current());return bX;}finally{if(typeof bY=="object"&&"Dispose"in bY)bY.Dispose();}}};o.iter=function(bW,bX){var bY,bZ;for(bY=0,bZ=bX.length-1;bY<=bZ;bY++)bW(bX[bY]);};o.foldBack=function(bW,bX,bY){var bZ,b0,b1,b2,b3;bZ=bY;b1=bX.length;for(b2=1,b3=b1;b2<=b3;b2++)bZ=bW(bX[b1-b2],bZ);return bZ;};o.map=function(bW,bX){var bY,bZ,b0;bY=new a.Array(bX.length);for(bZ=0,b0=bX.length-1;bZ<=b0;bZ++)bY[bZ]=bW(bX[bZ]);return bY;};o.filter=function(bW,bX){var bY,bZ,b0;bY=[];for(bZ=0,b0=bX.length-1;bZ<=b0;bZ++)if(bW(bX[bZ]))bY.push(bX[bZ]);return bY;};o.ofList=function(bW){var bX,bY;bY=[];bX=bW;while(!(bX.$==0)){bY.push(bh.head(bX));bX=bh.tail(bX);}return bY;};o.pick=function(bW,bX){var bY;bY=o.tryPick(bW,bX);return bY==null?g.FailWith("KeyNotFoundException"):bY.$0;};o.forall=function(bW,bX){var bY,bZ,b0,b1;bY=true;bZ=0;b1=o.length(bX);while(bY&&bZ<b1)if(bW(bX[bZ]))bZ=bZ+1;else bY=false;return bY;};o.create=function(bW,bX){var bY,bZ,b0;bY=new a.Array(bW);for(bZ=0,b0=bW-1;bZ<=b0;bZ++)bY[bZ]=bX;return bY;};o.init=function(bW,bX){var bY,bZ,b0;if(bW<0)g.FailWith("Negative size given.");else null;bY=new a.Array(bW);for(bZ=0,b0=bW-1;bZ<=b0;bZ++)bY[bZ]=bX(bZ);return bY;};S.$cctor=function(){S.$cctor=a.ignore;S.initialized=new I.New$5();};S=m.TemplateInitializer=bT.Class({},h,S);S.GetOrAddHoleFor=function(bW,bX,bY){var bZ,b0,b1,b2;S.$cctor();bZ=S.GetHolesFor(bW);b0=(b1=null,[bZ.TryGetValue(bX,{get:function(){return b1;},set:function(b3){b1=b3;}}),b1]);return b0[0]?b0[1]:(b2=bY(),(bZ.set_Item(bX,b2),b2));};S.GetHolesFor=function(bW){var bX,bY,bZ;S.$cctor();bX=(bY=null,[S.initialized.TryGetValue(bW,{get:function(){return bY;},set:function(b0){bY=b0;}}),bY]);return bX[0]?bX[1]:(bZ=new I.New$5(),(S.initialized.set_Item(bW,bZ),bZ));};T.GetFieldValues=function(bW){var bX,bY;bX=[];for(var bZ in bW)bX.push(bW[bZ]);return bX;};K.MapSeqCached=function(bW,bX){return K.MapSeqCachedBy(a.id,bW,bX);};K.MapSeqCachedBy=function(bW,bX,bY){var bZ;bZ=[new I.New$5()];return K.Map(function(b0){var b1,b2,b3;b1=bZ[0];b2=new I.New$5();b3=bd.mapInPlace(function(b4){var b5,b6;b5=bW(b4);b6=b1.ContainsKey(b5)?b1.Item(b5):bX(b4);b2.set_Item(b5,b6);return b6;},o.ofSeq(b0));bZ[0]=b2;return b3;},bY);};K.Map=function(bW,bX){return K.CreateLazy(function(){return w.Map(bW,bX());});};K.Const=function(bW){var bX;bX=w.New({$:0,$0:bW});return function(){return bX;};};K.Sink=function(bW,bX){function bY(){w.WhenRun(bX(),bW,function(){bp.scheduler().Fork(bY);});}bp.scheduler().Fork(bY);};K.CreateLazy=function(bW){var bX;bX={c:null,o:bW};return function(){var bY,bZ;bY=bX.c;return bY===null?(bY=bX.o(),bX.c=bY,(bZ=bY.s,bZ!=null&&bZ.$==0)?bX.o=null:w.WhenObsoleteRun(bY,function(){bX.c=null;}),bY):bY;};};K.Bind=function(bW,bX){return K.Join(K.Map(bW,bX));};K.Map3=function(bW,bX,bY,bZ){return K.CreateLazy(function(){return w.Map3(bW,bX(),bY(),bZ());});};K.Sequence=function(bW){return K.CreateLazy(function(){return w.Sequence(R.map(function(bX){return bX();},bW));});};K.Map2=function(bW,bX,bY){return K.CreateLazy(function(){return w.Map2(bW,bX(),bY());});};K.Map2Unit=function(bW,bX){return K.CreateLazy(function(){return w.Map2Unit(bW(),bX());});};K.Join=function(bW){return K.CreateLazy(function(){return w.Join(bW());});};U.notPresent=function(){throw new bA.New();};V.Get=function(bW){return bW instanceof a.Array?V.ArrayEnumerator(bW):r.Equals(typeof bW,"string")?V.StringEnumerator(bW):bW.GetEnumerator();};V.ArrayEnumerator=function(bW){return new W.New(0,null,function(bX){var bY;bY=bX.s;return bY<o.length(bW)&&(bX.c=o.get(bW,bY),bX.s=bY+1,true);},void 0);};V.StringEnumerator=function(bW){return new W.New(0,null,function(bX){var bY;bY=bX.s;return bY<bW.length&&(bX.c=bW[bY],bX.s=bY+1,true);},void 0);};V.Get0=function(bW){return bW instanceof a.Array?V.ArrayEnumerator(bW):r.Equals(typeof bW,"string")?V.StringEnumerator(bW):"GetEnumerator0"in bW?bW.GetEnumerator0():bW.GetEnumerator();};W=V.T=bT.Class({MoveNext:function(){var bW;bW=this.n(this);this.e=bW?1:2;return bW;},Current:function(){return this.e===1?this.c:this.e===0?g.FailWith("Enumeration has not started. Call MoveNext."):g.FailWith("Enumeration already finished.");},Dispose:function(){if(this.d)this.d(this);}},h,W);W.New=bT.Ctor(function(bW,bX,bY,bZ){h.New.call(this);this.s=bW;this.c=bX;this.n=bY;this.d=bZ;this.e=0;},W);Y.$cctor=function(){Y.$cctor=a.ignore;Y.LoadedTemplates=new I.New$5();Y.LocalTemplatesLoaded=false;Y.GlobalHoles=new I.New$5();Y.TextHoleRE="\\${([^}]+)}";Y.RenderedFullDocTemplate=null;};Z.LinkElement=function(bW,bX){Z.InsertDoc(bW,bX,null);};Z.InsertDoc=function(bW,bX,bY){var bZ,b0,b1;while(true)if(bX!=null&&bX.$==1)return Z.InsertNode(bW,bX.$0.El,bY);else if(bX!=null&&bX.$==2){bZ=bX.$0;bZ.Dirty=false;bX=bZ.Current;}else if(bX==null)return bY;else if(bX!=null&&bX.$==4)return Z.InsertNode(bW,bX.$0.Text,bY);else if(bX!=null&&bX.$==5)return Z.InsertNode(bW,bX.$0,bY);else if(bX!=null&&bX.$==6)return o.foldBack(function(b2,b3){return(((bT.Curried3(function(b4,b5,b6){return b5==null||b5.constructor===L?Z.InsertDoc(b4,b5,b6):Z.InsertNode(b4,b5,b6);}))(bW))(b2))(b3);},bX.$0.Els,bY);else{b0=bX.$1;b1=bX.$0;bX=b1;bY=Z.InsertDoc(bW,b0,bY);}};Z.CreateRunState=function(bW,bX){return bn.New(bo.get_Empty(),Z.CreateElemNode(bW,bf.EmptyAttr(),bX));};Z.PerformAnimatedUpdate=function(bW,bX,bY){var bZ;return _.get_UseAnimations()?(bZ=null,bp.Delay(function(){var b0,b1,b2;b0=bo.FindAll(bY);b1=Z.ComputeChangeAnim(bX,b0);b2=Z.ComputeEnterAnim(bX,b0);return bp.Bind(_.Play(_.Append(b1,Z.ComputeExitAnim(bX,b0))),function(){return bp.Bind(Z.SyncElemNodesNextFrame(bW,bX),function(){return bp.Bind(_.Play(b2),function(){bX.PreviousNodes=b0;return bp.Return(null);});});});})):Z.SyncElemNodesNextFrame(bW,bX);};Z.PerformSyncUpdate=function(bW,bX,bY){var bZ;bZ=bo.FindAll(bY);Z.SyncElemNode(bW,bX.Top);bX.PreviousNodes=bZ;};Z.CreateEmbedNode=function(){return{Current:null,Dirty:false};};Z.UpdateEmbedNode=function(bW,bX){bW.Current=bX;bW.Dirty=true;};Z.InsertBeforeDelim=function(bW,bX){var bY,bZ;bY=bW.parentNode;bZ=self.document.createTextNode("");bY.insertBefore(bZ,bW);Z.LinkPrevElement(bW,bX);return bZ;};Z.InsertNode=function(bW,bX,bY){_8.InsertAt(bW,bY,bX);return bX;};Z.CreateElemNode=function(bW,bX,bY){var bZ;Z.LinkElement(bW,bY);bZ=bf.Insert(bW,bX);return _1.New(bZ,bY,null,bW,G.Int(),bT.GetOptional(bZ.OnAfterRender));};Z.SyncElemNodesNextFrame=function(bW,bX){function bY(bZ){a.requestAnimationFrame(function(){Z.SyncElemNode(bW,bX.Top);bZ();});}return $.BatchUpdatesEnabled()?bp.FromContinuations(function(bZ,b0,b1){return bY.apply(null,[bZ,b0,b1]);}):(Z.SyncElemNode(bW,bX.Top),bp.Return(null));};Z.ComputeExitAnim=function(bW,bX){return _.Concat(o.map(function(bY){return bf.GetExitAnim(bY.Attr);},bo.ToArray(bo.Except(bX,bo.Filter(function(bY){return bf.HasExitAnim(bY.Attr);},bW.PreviousNodes)))));};Z.ComputeEnterAnim=function(bW,bX){return _.Concat(o.map(function(bY){return bf.GetEnterAnim(bY.Attr);},bo.ToArray(bo.Except(bW.PreviousNodes,bo.Filter(function(bY){return bf.HasEnterAnim(bY.Attr);},bX)))));};Z.ComputeChangeAnim=function(bW,bX){var bY;function bZ(b0){return bf.HasChangeAnim(b0.Attr);}bY=function(b0){return bo.Filter(bZ,b0);};return _.Concat(o.map(function(b0){return bf.GetChangeAnim(b0.Attr);},bo.ToArray(bo.Intersect(bY(bW.PreviousNodes),bY(bX)))));};Z.SyncElemNode=function(bW,bX){!bW?Z.SyncElement(bX):void 0;Z.Sync(bX.Children);Z.AfterRender(bX);};Z.CreateTextNode=function(){return{Text:self.document.createTextNode(""),Dirty:false,Value:""};};Z.UpdateTextNode=function(bW,bX){bW.Value=bX;bW.Dirty=true;};Z.LinkPrevElement=function(bW,bX){Z.InsertDoc(bW.parentNode,bX,bW);};Z.SyncElement=function(bW){function bX(bY){function bZ(b0){var b1,b2,b3,b4;while(true){if(b0!=null&&b0.$==0){b2=b0.$1;b3=b0.$0;if(bZ(b3))return true;else b0=b2;}else if(b0!=null&&b0.$==2){b4=b0.$0;if(b4.Dirty)return true;else b0=b4.Current;}else return b0!=null&&b0.$==6&&(b1=b0.$0,b1.Dirty||o.exists(bX,b1.Holes));}}return bZ(bY.Children);}bf.Sync(bW.El,bW.Attr);if(bX(bW))Z.DoSyncElement(bW);};Z.Sync=function(bW){var bX,bY,bZ,b0,b1;while(true){if(bW!=null&&bW.$==1)return Z.SyncElemNode(false,bW.$0);else if(bW!=null&&bW.$==2){bZ=bW.$0;bW=bZ.Current;}else if(bW==null)return null;else if(bW!=null&&bW.$==5)return null;else if(bW!=null&&bW.$==4){bX=bW.$0;return bX.Dirty?(bX.Text.nodeValue=bX.Value,bX.Dirty=false):null;}else if(bW!=null&&bW.$==6){bY=bW.$0;o.iter(function(b2){Z.SyncElemNode(false,b2);},bY.Holes);o.iter(function(b2){bf.Sync(b2[0],b2[1]);},bY.Attrs);return Z.AfterRender(bY);}else{b0=bW.$1;b1=bW.$0;Z.Sync(b1);bW=b0;}}};Z.AfterRender=function(bW){var bX;bX=bT.GetOptional(bW.Render);if(bX!=null&&bX.$==1){bX.$0(bW.El);bT.SetOptional(bW,"Render",null);}};Z.DoSyncElement=function(bW){var bX,bY,bZ;function b0(b1,b2){var b3,b4,b5,b6;while(true){if(b1!=null&&b1.$==1)return b1.$0.El;else if(b1!=null&&b1.$==2){b4=b1.$0;if(b4.Dirty){b4.Dirty=false;return Z.InsertDoc(bX,b4.Current,b2);}else b1=b4.Current;}else if(b1==null)return b2;else if(b1!=null&&b1.$==4)return b1.$0.Text;else if(b1!=null&&b1.$==5)return b1.$0;else if(b1!=null&&b1.$==6){b3=b1.$0;b3.Dirty?b3.Dirty=false:void 0;return o.foldBack(function(b7,b8){return b7==null||b7.constructor===L?b0(b7,b8):b7;},b3.Els,b2);}else{b5=b1.$1;b6=b1.$0;b1=b6;b2=b0(b5,b2);}}}bX=bW.El;bJ.Iter((bY=bW.El,function(b1){_8.RemoveNode(bY,b1);}),bJ.Except(bJ.DocChildren(bW),bJ.Children(bW.El,bT.GetOptional(bW.Delimiters))));b0(bW.Children,(bZ=bT.GetOptional(bW.Delimiters),bZ!=null&&bZ.$==1?bZ.$0[1]:null));};_0.$cctor=function(){_0.$cctor=a.ignore;_0.counter=0;};_1=i.DocElemNode=bT.Class({Equals:function(bW){return this.ElKey===bW.ElKey;},GetHashCode:function(){return this.ElKey;}},null,_1);_1.New=function(bW,bX,bY,bZ,b0,b1){var b2;return new _1((b2={Attr:bW,Children:bX,El:bZ,ElKey:b0},(bT.SetOptional(b2,"Delimiters",bY),bT.SetOptional(b2,"Render",b1),b2)));};_3.InMemory=function(bW){return new be.New(bW);};_4=i.Elt=bT.Class({},E,_4);_4.TreeNode=function(bW,bX){var bY,bZ;function b0(b1,b2){return bf.Updates(b2);}bY=bk.Create(bX);return new _4.New$1({$:6,$0:bW},K.Map2Unit((bZ=o.map(function(b1){return b0(b1[0],b1[1]);},bW.Attrs),bd.TreeReduce(K.Const(),K.Map2Unit,bZ)),bY.v),o.get(bW.Els,0),bY);};_4.New$1=bT.Ctor(function(bW,bX,bY,bZ){E.New.call(this,bW,bX);this.docNode$1=bW;this.updates$1=bX;this.elt=bY;this.rvUpdates=bZ;},_4);_6.convertTextNode=function(bW){var bX,bY,bZ,b0,b1,b2;bX=null;bY=0;b0=bW.textContent;b1=new a.RegExp(D.TextHoleRE(),"g");while(bX=b1.exec(b0),bX!==null){bW.parentNode.insertBefore(self.document.createTextNode(_7.string(b0,{$:1,$0:bY},{$:1,$0:b1.lastIndex-o.get(bX,0).length-1})),bW);bY=b1.lastIndex;b2=self.document.createElement("span");b2.setAttribute("ws-replace",o.get(bX,1).toLowerCase());bW.parentNode.insertBefore(b2,bW);}b1.lastIndex=0;bW.textContent=_7.string(b0,{$:1,$0:bY},null);};_6.failNotLoaded=function(bW){bS.warn("Instantiating non-loaded template",bW);};_6.fillTextHole=function(bW,bX,bY){var bZ;bZ=bW.querySelector("[ws-replace]");return r.Equals(bZ,null)?(bS.warn("Filling non-existent text hole",bY),null):(bZ.parentNode.replaceChild(self.document.createTextNode(bX),bZ),{$:1,$0:bZ.getAttribute("ws-replace")});};_6.removeHolesExcept=function(bW,bX){function bY(bZ){D.foreachNotPreserved(bW,"["+bZ+"]",function(b0){if(!bX.Contains(b0.getAttribute(bZ)))b0.removeAttribute(bZ);});}bY("ws-attr");bY("ws-onafterrender");bY("ws-var");D.foreachNotPreserved(bW,"[ws-hole]",function(bZ){if(!bX.Contains(bZ.getAttribute("ws-hole"))){bZ.removeAttribute("ws-hole");while(bZ.hasChildNodes())bZ.removeChild(bZ.lastChild);}});D.foreachNotPreserved(bW,"[ws-replace]",function(bZ){if(!bX.Contains(bZ.getAttribute("ws-replace")))bZ.parentNode.removeChild(bZ);});D.foreachNotPreserved(bW,"[ws-on]",function(bZ){bZ.setAttribute("ws-on",bj.concat(" ",o.filter(function(b0){return bX.Contains(o.get(bj.SplitChars(b0,[":"],1),1));},bj.SplitChars(bZ.getAttribute("ws-on"),[" "],1))));});D.foreachNotPreserved(bW,"[ws-attr-holes]",function(bZ){var b0,b1,b2,b3,b4;b0=bj.SplitChars(bZ.getAttribute("ws-attr-holes"),[" "],1);for(b1=0,b2=b0.length-1;b1<=b2;b1++){b3=o.get(b0,b1);bZ.setAttribute(b3,(b4=new a.RegExp(D.TextHoleRE(),"g"),bZ.getAttribute(b3).replace(b4,function(b5,b6){return bX.Contains(b6)?b5:"";})));}});};_6.fillInstanceAttrs=function(bW,bX){var bY,bZ,b0,b1,b2;_6.convertAttrs(bX);bY=bX.nodeName.toLowerCase();bZ=bW.querySelector("[ws-attr="+bY+"]");if(r.Equals(bZ,null))bS.warn("Filling non-existent attr hole",bY);else{bZ.removeAttribute("ws-attr");for(b0=0,b1=bX.attributes.length-1;b0<=b1;b0++){b2=bX.attributes.item(b0);if(b2.name==="class"&&bZ.hasAttribute("class"))bZ.setAttribute("class",bZ.getAttribute("class")+" "+b2.nodeValue);else bZ.setAttribute(b2.name,b2.nodeValue);}}};_6.mapHoles=function(bW,bX){function bY(bZ){D.foreachNotPreserved(bW,"["+bZ+"]",function(b0){var b1,b2;b1=(b2=null,[bX.TryGetValue(b0.getAttribute(bZ).toLowerCase(),{get:function(){return b2;},set:function(b3){b2=b3;}}),b2]);if(b1[0])b0.setAttribute(bZ,b1[1]);});}bY("ws-hole");bY("ws-replace");bY("ws-attr");bY("ws-onafterrender");bY("ws-var");D.foreachNotPreserved(bW,"[ws-on]",function(bZ){bZ.setAttribute("ws-on",bj.concat(" ",o.map(function(b0){var b1,b2,b3;b1=bj.SplitChars(b0,[":"],1);b2=(b3=null,[bX.TryGetValue(o.get(b1,1),{get:function(){return b3;},set:function(b4){b3=b4;}}),b3]);return b2[0]?o.get(b1,0)+":"+b2[1]:b0;},bj.SplitChars(bZ.getAttribute("ws-on"),[" "],1))));});D.foreachNotPreserved(bW,"[ws-attr-holes]",function(bZ){var b0,b1,b2;b0=bj.SplitChars(bZ.getAttribute("ws-attr-holes"),[" "],1);for(b1=0,b2=b0.length-1;b1<=b2;b1++)(function(){var b3;function b4(b5,b6){var b7;b7=g.KeyValue(b6);return b5.replace(new a.RegExp("\\${"+b7[0]+"}","ig"),"${"+b7[1]+"}");}b3=o.get(b0,b1);return bZ.setAttribute(b3,(((bT.Curried3(R.fold))(b4))(bZ.getAttribute(b3)))(bX));}());});};_6.fill=function(bW,bX,bY){while(true)if(bW.hasChildNodes())bY=bX.insertBefore(bW.lastChild,bY);else return null;};_6.convertAttrs=function(bW){var bY,bZ,b0,b1,b2,b3,b4,b5;function bX(b6){var b7;b7=bW.getAttribute(b6);if(b7===null);else bW.setAttribute(b6,b7.toLowerCase());}bY=bW.attributes;bZ=[];b0=[];b1=[];for(b2=0,b3=bY.length-1;b2<=b3;b2++){b4=bY.item(b2);if(bj.StartsWith(b4.nodeName,"ws-on")&&b4.nodeName!=="ws-onafterrender"&&b4.nodeName!=="ws-on"){bZ.push(b4.nodeName);b0.push(_7.string(b4.nodeName,{$:1,$0:"ws-on".length},null)+":"+b4.nodeValue.toLowerCase());}else!bj.StartsWith(b4.nodeName,"ws-")&&(new a.RegExp(D.TextHoleRE())).test(b4.nodeValue)?(b4.nodeValue=(b5=new a.RegExp(D.TextHoleRE(),"g"),b4.nodeValue.replace(b5,function(b6,b7){return"${"+b7.toLowerCase()+"}";})),b1.push(b4.nodeName)):void 0;}if(!(b0.length==0))bW.setAttribute("ws-on",bj.concat(" ",b0));if(!(b1.length==0))bW.setAttribute("ws-attr-holes",bj.concat(" ",b1));bX("ws-hole");bX("ws-replace");bX("ws-attr");bX("ws-onafterrender");bX("ws-var");o.iter(function(b6){bW.removeAttribute(b6);},bZ);};_7.string=function(bW,bX,bY){var bZ,b0;return bX==null?bY!=null&&bY.$==1?(bZ=bY.$0,bZ<0?"":bW.slice(0,bZ+1)):"":bY==null?bW.slice(bX.$0):(b0=bY.$0,b0<0?"":bW.slice(bX.$0,b0+1));};_8.ParseHTMLIntoFakeRoot=function(bW){var bX,bY,bZ,b0,b1;function b2(b3,b4){var b5;while(true)if(b4===0)return b3;else{b5=b4;b3=b3.lastChild;b4=b5-1;}}bX=self.document.createElement("div");return!_8.rhtml().test(bW)?(bX.appendChild(self.document.createTextNode(bW)),bX):(bY=(bZ=_8.rtagName().exec(bW),r.Equals(bZ,null)?"":o.get(bZ,1).toLowerCase()),(b0=(b1=(_8.wrapMap())[bY],b1?b1:_8.defaultWrap()),(bX.innerHTML=b0[1]+bW.replace(_8.rxhtmlTag(),"<$1></$2>")+b0[2],b2(bX,b0[0]))));};_8.ChildrenArray=function(bW){var bX,bY,bZ;bX=[];for(bY=0,bZ=bW.childNodes.length-1;bY<=bZ;bY++)bX.push(bW.childNodes[bY]);return bX;};_8.rhtml=function(){bu.$cctor();return bu.rhtml;};_8.wrapMap=function(){bu.$cctor();return bu.wrapMap;};_8.defaultWrap=function(){bu.$cctor();return bu.defaultWrap;};_8.rxhtmlTag=function(){bu.$cctor();return bu.rxhtmlTag;};_8.rtagName=function(){bu.$cctor();return bu.rtagName;};_8.IterSelector=function(bW,bX,bY){var bZ,b0,b1;bZ=bW.querySelectorAll(bX);for(b0=0,b1=bZ.length-1;b0<=b1;b0++)bY(bZ[b0]);};_8.IterSelectorDoc=function(bW,bX){var bY,bZ,b0;bY=self.document.querySelectorAll(bW);for(bZ=0,b0=bY.length-1;bZ<=b0;bZ++)bX(bY[bZ]);};_8.InsertAt=function(bW,bX,bY){var bZ;if(!(bY.parentNode===bW&&bX===(bZ=bY.nextSibling,r.Equals(bZ,null)?null:bZ)))bW.insertBefore(bY,bX);};_8.RemoveNode=function(bW,bX){if(bX.parentNode===bW)bW.removeChild(bX);};R.insufficient=function(){return g.FailWith("The input sequence has an insufficient number of elements.");};R.nonNegative=function(){return g.FailWith("The input must be non-negative.");};_9=H.KeyCollection=bT.Class({GetEnumerator:function(){return V.Get(R.map(function(bW){return bW.K;},this.d));}},h,_9);_9.New=bT.Ctor(function(bW){h.New.call(this);this.d=bW;},_9);_.get_UseAnimations=function(){return bq.UseAnimations();};_.Play=function(bW){var bX;bX=null;return bp.Delay(function(){return bp.Bind(_.Run(a.ignore,bq.Actions(bW)),function(){bq.Finalize(bW);return bp.Return(null);});});};_.Append=function(bW,bX){return{$:0,$0:bw.Append(bW.$0,bX.$0)};};_.Run=function(bW,bX){var bY;function bZ(b0){function b1(b2){return function(b3){var b4;b4=b3-b2;bX.Compute(b4);bW();return b4<=bY?void a.requestAnimationFrame(function(b5){(b1(b2))(b5);}):b0();};}a.requestAnimationFrame(function(b2){(b1(b2))(b2);});}bY=bX.Duration;return bY===0?bp.Zero():bp.FromContinuations(function(b0,b1,b2){return bZ.apply(null,[b0,b1,b2]);});};_.Concat=function(bW){return{$:0,$0:bw.Concat(R.map(bq.List,bW))};};_.get_Empty=function(){return{$:0,$0:bw.Empty()};};$.BatchUpdatesEnabled=function(){br.$cctor();return br.BatchUpdatesEnabled;};ba.StartProcessor=function(bW){var bX;function bY(){var bZ;bZ=null;return bp.Delay(function(){return bp.Bind(bW,function(){var b0;b0=bX[0];return r.Equals(b0,1)?(bX[0]=0,bp.Zero()):r.Equals(b0,2)?(bX[0]=1,bY()):bp.Zero();});});}bX=[0];return function(){var bZ;bZ=bX[0];if(r.Equals(bZ,0)){bX[0]=1;bp.Start(bY(),null);}else r.Equals(bZ,1)?bX[0]=2:void 0;};};bc.New=function(bW,bX,bY,bZ){var b0;b0={DynElem:bW,DynFlags:bX,DynNodes:bY};bT.SetOptional(b0,"OnAfterRender",bZ);return b0;};bd.mapInPlace=function(bW,bX){var bY,bZ;for(bY=0,bZ=bX.length-1;bY<=bZ;bY++)bX[bY]=bW(bX[bY]);return bX;};bd.ofSeqNonCopying=function(bW){var bX,bY;if(bW instanceof a.Array)return bW;else if(bW instanceof bi)return o.ofList(bW);else if(bW===null)return[];else{bX=[];bY=V.Get(bW);try{while(bY.MoveNext())bX.push(bY.Current());return bX;}finally{if(typeof bY=="object"&&"Dispose"in bY)bY.Dispose();}}};bd.TreeReduce=function(bW,bX,bY){var bZ;function b0(b1){return function(b2){var b3,b4;switch(b2<=0?0:b2===1?b1>=0&&b1<bZ?1:(b3=b2,2):(b3=b2,2)){case 0:return bW;case 1:return o.get(bY,b1);case 2:b4=b2/2>>0;return bX((b0(b1))(b4),(b0(b1+b4))(b2-b4));}};}bZ=o.length(bY);return(b0(0))(bZ);};bd.MapTreeReduce=function(bW,bX,bY,bZ){var b0;function b1(b2){return function(b3){var b4,b5;switch(b3<=0?0:b3===1?b2>=0&&b2<b0?1:(b4=b3,2):(b4=b3,2)){case 0:return bX;case 1:return bW(o.get(bZ,b2));case 2:b5=b3/2>>0;return bY((b1(b2))(b5),(b1(b2+b5))(b3-b5));}};}b0=o.length(bZ);return(b1(0))(b0);};be=_3.ArrayStorage=bT.Class({SSetAt:function(bW,bX,bY){o.set(bY,bW,bX);return bY;},SAppend:function(bW,bX){bX.push(bW);return bX;},SInit:function(){return this.init;}},h,be);be.New=bT.Ctor(function(bW){h.New.call(this);this.init=bW;},be);bf.Insert=function(bW,bX){var bY,bZ,b0;function b1(b2){var b3,b4;while(true)if(!(b2===null)){if(b2!=null&&b2.$==1)return bY.push(b2.$0);else if(b2!=null&&b2.$==2){b3=b2.$1;b4=b2.$0;b1(b4);b2=b3;}else return b2!=null&&b2.$==3?b2.$0(bW):b2!=null&&b2.$==4?bZ.push(b2.$0):null;}else return null;}bY=[];bZ=[];b1(bX);b0=bY.slice(0);return bc.New(bW,bf.Flags(bX),b0,bZ.length===0?null:{$:1,$0:function(b2){R.iter(function(b3){b3(b2);},bZ);}});};bf.Updates=function(bW){return bd.MapTreeReduce(function(bX){return bX.NChanged();},K.Const(),K.Map2Unit,bW.DynNodes);};bf.Empty=function(bW){return bc.New(bW,0,[],null);};bf.Flags=function(bW){return bW!==null&&bW.hasOwnProperty("flags")?bW.flags:0;};bf.Static=function(bW){return new M({$:3,$0:bW});};bf.Dynamic=function(bW,bX){return new M({$:1,$0:new by.New(bW,bX)});};bf.EmptyAttr=function(){bx.$cctor();return bx.EmptyAttr;};bf.HasExitAnim=function(bW){var bX;bX=2;return(bW.DynFlags&bX)===bX;};bf.GetExitAnim=function(bW){return bf.GetAnim(bW,function(bX,bY){return bX.NGetExitAnim(bY);});};bf.HasEnterAnim=function(bW){var bX;bX=1;return(bW.DynFlags&bX)===bX;};bf.GetEnterAnim=function(bW){return bf.GetAnim(bW,function(bX,bY){return bX.NGetEnterAnim(bY);});};bf.HasChangeAnim=function(bW){var bX;bX=4;return(bW.DynFlags&bX)===bX;};bf.GetChangeAnim=function(bW){return bf.GetAnim(bW,function(bX,bY){return bX.NGetChangeAnim(bY);});};bf.AppendTree=function(bW,bX){var bY;return bW===null?bX:bX===null?bW:(bY=new M({$:2,$0:bW,$1:bX}),(bf.SetFlags(bY,bf.Flags(bW)|bf.Flags(bX)),bY));};bf.GetAnim=function(bW,bX){return _.Concat(o.map(function(bY){return bX(bY,bW.DynElem);},bW.DynNodes));};bf.Sync=function(bW,bX){o.iter(function(bY){bY.NSync(bW);},bX.DynNodes);};bf.SetFlags=function(bW,bX){bW.flags=bX;};bg.Handler=function(bW,bX){return bf.Static(function(bY){bY.addEventListener(bW,function(bZ){return(bX(bY))(bZ);},false);});};bg.OnAfterRender=function(bW){return new M({$:4,$0:bW});};bg.Value=function(bW){return bg.ValueWith(bt.StringApply(),bW);};bg.Checked=function(bW){return bg.ValueWith(bt.BoolCheckedApply(),bW);};bg.DateTimeValue=function(bW){return bg.ValueWith(bt.DateTimeApplyUnchecked(),bW);};bg.FileValue=function(bW){return bg.ValueWith(bt.FileApplyUnchecked(),bW);};bg.IntValue=function(bW){return bg.ValueWith(bt.IntApplyChecked(),bW);};bg.IntValueUnchecked=function(bW){return bg.ValueWith(bt.IntApplyUnchecked(),bW);};bg.FloatValue=function(bW){return bg.ValueWith(bt.FloatApplyChecked(),bW);};bg.FloatValueUnchecked=function(bW){return bg.ValueWith(bt.FloatApplyUnchecked(),bW);};bg.Dynamic=function(bW,bX){return bf.Dynamic(bX,function(bY){return function(bZ){return bY.setAttribute(bW,bZ);};});};bg.ValueWith=function(bW,bX){var bY;bY=bW(bX);return M.Append(bf.Static(bY[0]),bg.DynamicCustom(bY[1],bY[2]));};bg.DynamicCustom=function(bW,bX){return bf.Dynamic(bX,bW);};bi=bh.T=bT.Class({GetEnumerator:function(){return new W.New(this,null,function(bW){var bX;bX=bW.s;return bX.$==0?false:(bW.c=bX.$0,bW.s=bX.$1,true);},void 0);}},null,bi);bi.Empty=new bi({$:0});bj.concat=function(bW,bX){return o.ofSeq(bX).join(bW);};bj.SplitChars=function(bW,bX,bY){return bj.Split(bW,new a.RegExp("["+bj.RegexEscape(bX.join(""))+"]"),bY);};bj.StartsWith=function(bW,bX){return bW.substring(0,bX.length)==bX;};bj.Split=function(bW,bX,bY){return bY===1?o.filter(function(bZ){return bZ!=="";},bj.SplitWith(bW,bX)):bj.SplitWith(bW,bX);};bj.RegexEscape=function(bW){return bW.replace(new a.RegExp("[-\\/\\\\^$*+?.()|[\\]{}]","g"),"\\$&");};bj.SplitWith=function(bW,bX){return bW.split(bX);};bj.forall=function(bW,bX){return R.forall(bW,bj.protect(bX));};bj.protect=function(bW){return bW===null?"":bW;};bk=i.Updates=bT.Class({},null,bk);bk.Create=function(bW){var bX;bX=null;bX=bk.New(bW,null,function(){var bY;bY=bX.s;return bY===null?(bY=w.Copy(bX.c()),bX.s=bY,w.WhenObsoleteRun(bY,function(){bX.s=null;}),bY):bY;});return bX;};bk.New=function(bW,bX,bY){return new bk({c:bW,s:bX,v:bY});};bl=H.ValueCollection=bT.Class({GetEnumerator:function(){return V.Get(R.map(function(bW){return bW.V;},this.d));}},h,bl);bl.New=bT.Ctor(function(bW){h.New.call(this);this.d=bW;},bl);bn.New=function(bW,bX){return{PreviousNodes:bW,Top:bX};};bo.get_Empty=function(){return{$:0,$0:new Q.New$3()};};bo.FindAll=function(bW){var bX;function bY(b1,b2){var b3,b4,b5,b6,b7;while(true)switch(b1){case 0:if(b2!=null&&b2.$==0){b4=b2.$1;b5=b2.$0;bY(0,b5);b2=b4;}else if(b2!=null&&b2.$==1){b6=b2.$0;b2=b6;b1=1;}else if(b2!=null&&b2.$==2){b7=b2.$0;b2=b7.Current;}else return b2!=null&&b2.$==6?(b3=b2.$0.Holes,(function(b8){return function(b9){o.iter(b8,b9);};}(b0))(b3)):null;break;case 1:bX.push(b2);b2=b2.Children;b1=0;break;}}function bZ(b1){return bY(0,b1);}function b0(b1){return bY(1,b1);}bX=[];bZ(bW);return{$:0,$0:new Q.New$2(bX)};};bo.Filter=function(bW,bX){return{$:0,$0:bG.Filter(bW,bX.$0)};};bo.Except=function(bW,bX){return{$:0,$0:bG.Except(bW.$0,bX.$0)};};bo.ToArray=function(bW){return bG.ToArray(bW.$0);};bo.Intersect=function(bW,bX){return{$:0,$0:bG.Intersect(bW.$0,bX.$0)};};bp.Delay=function(bW){return function(bX){try{(bW(null))(bX);}catch(bY){bX.k({$:1,$0:bY});}};};bp.Bind=function(bW,bX){return bp.checkCancel(function(bY){bW(bD.New(function(bZ){var b0;if(bZ.$==0){b0=bZ.$0;bp.scheduler().Fork(function(){try{(bX(b0))(bY);}catch(b1){bY.k({$:1,$0:b1});}});}else bp.scheduler().Fork(function(){bY.k(bZ);});},bY.ct));});};bp.Zero=function(){bE.$cctor();return bE.Zero;};bp.Start=function(bW,bX){var bY,bZ;bY=(bZ=(bp.defCTS())[0],bX==null?bZ:bX.$0);bp.scheduler().Fork(function(){if(!bY.c)bW(bD.New(function(b0){if(b0.$==1)bp.UncaughtAsyncError(b0.$0);},bY));});};bp.Return=function(bW){return function(bX){bX.k({$:0,$0:bW});};};bp.scheduler=function(){bE.$cctor();return bE.scheduler;};bp.checkCancel=function(bW){return function(bX){if(bX.ct.c)bp.cancel(bX);else bW(bX);};};bp.defCTS=function(){bE.$cctor();return bE.defCTS;};bp.UncaughtAsyncError=function(bW){bS.log("WebSharper: Uncaught asynchronous exception",bW);};bp.FromContinuations=function(bW){return function(bX){var bY;function bZ(b0){if(bY[0])g.FailWith("A continuation provided by Async.FromContinuations was invoked multiple times");else{bY[0]=true;bp.scheduler().Fork(b0);}}bY=[false];bW(function(b0){bZ(function(){bX.k({$:0,$0:b0});});},function(b0){bZ(function(){bX.k({$:1,$0:b0});});},function(b0){bZ(function(){bX.k({$:2,$0:b0});});});};};bp.cancel=function(bW){bW.k({$:2,$0:new bN.New(bW.ct)});};bq.UseAnimations=function(){bv.$cctor();return bv.UseAnimations;};bq.Actions=function(bW){return bq.ConcatActions(o.choose(function(bX){return bX.$==1?{$:1,$0:bX.$0}:null;},bw.ToArray(bW.$0)));};bq.Finalize=function(bW){o.iter(function(bX){if(bX.$==0)bX.$0();},bw.ToArray(bW.$0));};bq.ConcatActions=function(bW){var bX,bY,bZ,b0;bX=bd.ofSeqNonCopying(bW);bY=o.length(bX);return bY===0?bq.Const():bY===1?o.get(bX,0):(bZ=R.max(R.map(function(b1){return b1.Duration;},bX)),(b0=o.map(function(b1){return bq.Prolong(bZ,b1);},bX),bq.Def(bZ,function(b1){o.iter(function(b2){b2.Compute(b1);},b0);})));};bq.List=function(bW){return bW.$0;};bq.Const=function(bW){return bq.Def(0,function(){return bW;});};bq.Def=function(bW,bX){return{Compute:bX,Duration:bW};};bq.Prolong=function(bW,bX){var bY,bZ,b0;bY=bX.Compute;bZ=bX.Duration;b0=bO.Create(function(){return bX.Compute(bX.Duration);});return{Compute:function(b1){return b1>=bZ?b0.f():bY(b1);},Duration:bW};};br.$cctor=function(){br.$cctor=a.ignore;br.BatchUpdatesEnabled=true;};bs.concat=function(bW){var bX,bY;bX=[];for(var bZ in bW)bX.push.apply(bX,bW[bZ]);return bX;};bt.StringApply=function(){bx.$cctor();return bx.StringApply;};bt.BoolCheckedApply=function(){bx.$cctor();return bx.BoolCheckedApply;};bt.DateTimeApplyUnchecked=function(){bx.$cctor();return bx.DateTimeApplyUnchecked;};bt.FileApplyUnchecked=function(){bx.$cctor();return bx.FileApplyUnchecked;};bt.IntApplyChecked=function(){bx.$cctor();return bx.IntApplyChecked;};bt.IntApplyUnchecked=function(){bx.$cctor();return bx.IntApplyUnchecked;};bt.FloatApplyChecked=function(){bx.$cctor();return bx.FloatApplyChecked;};bt.FloatApplyUnchecked=function(){bx.$cctor();return bx.FloatApplyUnchecked;};bt.ApplyValue=function(bW,bX,bY){var bZ;function b0(b1,b2){return b2==null?null:b1(b2.$0);}bZ=null;return[function(b1){function b2(){bY.UpdateMaybe(function(b3){var b4;bZ=bW(b1);return bZ!=null&&bZ.$==1&&(!r.Equals(bZ.$0,b3)&&(b4=[bZ,bZ.$0],true))?b4[0]:null;});}b1.addEventListener("change",b2);b1.addEventListener("input",b2);b1.addEventListener("keypress",b2);},function(b1){var b2;b2=bX(b1);return function(b3){return b0(b2,b3);};},K.Map(function(b1){var b2;return bZ!=null&&bZ.$==1&&(r.Equals(bZ.$0,b1)&&(b2=bZ.$0,true))?null:{$:1,$0:b1};},bY.get_View())];};bt.StringSet=function(){bx.$cctor();return bx.StringSet;};bt.StringGet=function(){bx.$cctor();return bx.StringGet;};bt.DateTimeSetUnchecked=function(){bx.$cctor();return bx.DateTimeSetUnchecked;};bt.DateTimeGetUnchecked=function(){bx.$cctor();return bx.DateTimeGetUnchecked;};bt.FileApplyValue=function(bW,bX,bY){var bZ;function b0(b1,b2){return b2==null?null:b1(b2.$0);}bZ=null;return[function(b1){b1.addEventListener("change",function(){bY.UpdateMaybe(function(b2){var b3;bZ=bW(b1);return bZ!=null&&bZ.$==1&&(bZ.$0!==b2&&(b3=[bZ,bZ.$0],true))?b3[0]:null;});});},function(b1){var b2;b2=bX(b1);return function(b3){return b0(b2,b3);};},K.Map(function(b1){var b2;return bZ!=null&&bZ.$==1&&(r.Equals(bZ.$0,b1)&&(b2=bZ.$0,true))?null:{$:1,$0:b1};},bY.get_View())];};bt.FileSetUnchecked=function(){bx.$cctor();return bx.FileSetUnchecked;};bt.FileGetUnchecked=function(){bx.$cctor();return bx.FileGetUnchecked;};bt.IntSetUnchecked=function(){bx.$cctor();return bx.IntSetUnchecked;};bt.IntGetUnchecked=function(){bx.$cctor();return bx.IntGetUnchecked;};bt.IntSetChecked=function(){bx.$cctor();return bx.IntSetChecked;};bt.IntGetChecked=function(){bx.$cctor();return bx.IntGetChecked;};bt.FloatSetUnchecked=function(){bx.$cctor();return bx.FloatSetUnchecked;};bt.FloatGetUnchecked=function(){bx.$cctor();return bx.FloatGetUnchecked;};bt.FloatSetChecked=function(){bx.$cctor();return bx.FloatSetChecked;};bt.FloatGetChecked=function(){bx.$cctor();return bx.FloatGetChecked;};bu.$cctor=function(){var bW;bu.$cctor=a.ignore;bu.rxhtmlTag=new a.RegExp("<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\\w:]+)[^>]*)\\/>","gi");bu.rtagName=new a.RegExp("<([\\w:]+)");bu.rhtml=new a.RegExp("<|&#?\\w+;");bu.wrapMap=(bW=[1,"<table>","</table>"],{option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:bW,tbody:bW,tfoot:bW,tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><colgroup>","</colgoup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"]});bu.defaultWrap=[0,"",""];};bv.$cctor=function(){bv.$cctor=a.ignore;bv.CubicInOut=bC.Custom(function(bW){var bX;bX=bW*bW;return 3*bX-2*(bX*bW);});bv.UseAnimations=true;};bw.Append=function(bW,bX){return bW.$==0?bX:bX.$==0?bW:{$:2,$0:bW,$1:bX};};bw.ToArray=function(bW){var bX;function bY(bZ){var b0,b1;while(true)if(bZ.$==1)return bX.push(bZ.$0);else if(bZ.$==2){b0=bZ.$1;b1=bZ.$0;bY(b1);bZ=b0;}else return bZ.$==3?o.iter(function(b2){bX.push(b2);},bZ.$0):null;}bX=[];bY(bW);return bX.slice(0);};bw.Concat=function(bW){var bX;bX=bd.ofSeqNonCopying(bW);return bd.TreeReduce(bw.Empty(),bw.Append,bX);};bw.Empty=function(){bP.$cctor();return bP.Empty;};bh.head=function(bW){return bW.$==1?bW.$0:bh.listEmpty();};bh.tail=function(bW){return bW.$==1?bW.$1:bh.listEmpty();};bh.listEmpty=function(){return g.FailWith("The input list was empty.");};bx.$cctor=function(){var bW,bX,bY,bZ,b0,b1,b2,b3,b4,b5,b6,b7,b8,b9;bx.$cctor=a.ignore;bx.EmptyAttr=null;bx.BoolCheckedApply=function(b_){function b$(ca,cb){return cb!=null&&cb.$==1?void(ca.checked=cb.$0):null;}return[function(ca){ca.addEventListener("change",function(){return!r.Equals(b_.Get(),ca.checked)?b_.Set(ca.checked):null;});},function(ca){return function(cb){return b$(ca,cb);};},K.Map(function(ca){return{$:1,$0:ca};},b_.get_View())];};bx.StringSet=function(b_){return function(b$){b_.value=b$;};};bx.StringGet=function(b_){return{$:1,$0:b_.value};};bx.StringApply=(bW=bt.StringGet(),(bX=bt.StringSet(),function(b_){return bt.ApplyValue(bW,bX,b_);}));bx.DateTimeSetUnchecked=function(b_){return function(b$){b_.value=(new a.Date(b$)).toLocaleString();};};bx.DateTimeGetUnchecked=function(b_){var b$,ca,cb,cc;b$=b_.value;return bH.isBlank(b$)?{$:1,$0:-8640000000000000}:(ca=(cb=0,[(cc=bM.TryParse(b$),cc!=null&&cc.$==1&&(cb=cc.$0,true)),cb]),ca[0]?{$:1,$0:ca[1]}:null);};bx.DateTimeApplyUnchecked=(bY=bt.DateTimeGetUnchecked(),(bZ=bt.DateTimeSetUnchecked(),function(b_){return bt.ApplyValue(bY,bZ,b_);}));bx.FileSetUnchecked=function(){return function(){return null;};};bx.FileGetUnchecked=function(b_){var b$;b$=b_.files;return{$:1,$0:o.ofSeq(R.delay(function(){return R.map(function(ca){return b$.item(ca);},g.range(0,b$.length-1));}))};};bx.FileApplyUnchecked=(b0=bt.FileGetUnchecked(),(b1=bt.FileSetUnchecked(),function(b_){return bt.FileApplyValue(b0,b1,b_);}));bx.IntSetUnchecked=function(b_){return function(b$){b_.value=a.String(b$);};};bx.IntGetUnchecked=function(b_){var b$,ca;b$=b_.value;return bH.isBlank(b$)?{$:1,$0:0}:(ca=+b$,ca!==ca>>0?null:{$:1,$0:ca});};bx.IntApplyUnchecked=(b2=bt.IntGetUnchecked(),(b3=bt.IntSetUnchecked(),function(b_){return bt.ApplyValue(b2,b3,b_);}));bx.IntSetChecked=function(b_){return function(b$){var ca;ca=b$.get_Input();return b_.value!==ca?void(b_.value=ca):null;};};bx.IntGetChecked=function(b_){var b$,ca,cb;b$=b_.value;return{$:1,$0:bH.isBlank(b$)?(b_.checkValidity?b_.checkValidity():true)?new O({$:2,$0:b$}):new O({$:1,$0:b$}):(ca=(cb=0,[P.TryParseInt32(b$,{get:function(){return cb;},set:function(cc){cb=cc;}}),cb]),ca[0]?new O({$:0,$0:ca[1],$1:b$}):new O({$:1,$0:b$}))};};bx.IntApplyChecked=(b4=bt.IntGetChecked(),(b5=bt.IntSetChecked(),function(b_){return bt.ApplyValue(b4,b5,b_);}));bx.FloatSetUnchecked=function(b_){return function(b$){b_.value=a.String(b$);};};bx.FloatGetUnchecked=function(b_){var b$,ca;b$=b_.value;return bH.isBlank(b$)?{$:1,$0:0}:(ca=+b$,a.isNaN(ca)?null:{$:1,$0:ca});};bx.FloatApplyUnchecked=(b6=bt.FloatGetUnchecked(),(b7=bt.FloatSetUnchecked(),function(b_){return bt.ApplyValue(b6,b7,b_);}));bx.FloatSetChecked=function(b_){return function(b$){var ca;ca=b$.get_Input();return b_.value!==ca?void(b_.value=ca):null;};};bx.FloatGetChecked=function(b_){var b$,ca;b$=b_.value;return{$:1,$0:bH.isBlank(b$)?(b_.checkValidity?b_.checkValidity():true)?new O({$:2,$0:b$}):new O({$:1,$0:b$}):(ca=+b$,a.isNaN(ca)?new O({$:1,$0:b$}):new O({$:0,$0:ca,$1:b$}))};};bx.FloatApplyChecked=(b8=bt.FloatGetChecked(),(b9=bt.FloatSetChecked(),function(b_){return bt.ApplyValue(b8,b9,b_);}));};by=i.DynamicAttrNode=bT.Class({NChanged:function(){return this.updates;},NGetExitAnim:function(bW){return _.get_Empty();},NGetEnterAnim:function(bW){return _.get_Empty();},NGetChangeAnim:function(bW){return _.get_Empty();},NSync:function(bW){if(this.dirty){(this.push(bW))(this.value);this.dirty=false;}}},h,by);by.New=bT.Ctor(function(bW,bX){var bY;bY=this;h.New.call(this);this.push=bX;this.value=void 0;this.dirty=false;this.updates=K.Map(function(bZ){bY.value=bZ;bY.dirty=true;},bW);},by);bA=f.KeyNotFoundException=bT.Class({},bz,bA);bA.New=bT.Ctor(function(){bA.New$1.call(this,"The given key was not present in the dictionary.");},bA);bA.New$1=bT.Ctor(function(bW){this.message=bW;L.setPrototypeOf(this,bA.prototype);},bA);bB=bp.Scheduler=bT.Class({Fork:function(bW){var bX;bX=this;this.robin.push(bW);if(this.idle){this.idle=false;a.setTimeout(function(){bX.tick();},0);}},tick:function(){var bW,bX,bY;bX=this;bY=bV.now();bW=true;while(bW)if(this.robin.length===0){this.idle=true;bW=false;}else{(this.robin.shift())();bV.now()-bY>40?(a.setTimeout(function(){bX.tick();},0),bW=false):void 0;}}},h,bB);bB.New=bT.Ctor(function(){h.New.call(this);this.idle=true;this.robin=[];},bB);bC=i.Easing=bT.Class({},h,bC);bC.Custom=function(bW){return new bC.New(bW);};bC.New=bT.Ctor(function(bW){h.New.call(this);this.transformTime=bW;},bC);bD.New=function(bW,bX){return{k:bW,ct:bX};};bE.$cctor=function(){bE.$cctor=a.ignore;bE.noneCT=bF.New(false,[]);bE.scheduler=new bB.New();bE.defCTS=[new bI.New()];bE.Zero=bp.Return();bE.GetCT=function(bW){bW.k({$:0,$0:bW.ct});};};bF.New=function(bW,bX){return{c:bW,r:bX};};bG.Filter=function(bW,bX){return new Q.New$2(o.filter(bW,bG.ToArray(bX)));};bG.Except=function(bW,bX){var bY;bY=new Q.New$2(bG.ToArray(bX));bY.ExceptWith(bG.ToArray(bW));return bY;};bG.ToArray=function(bW){var bX;bX=o.create(bW.Count(),void 0);bW.CopyTo(bX,0);return bX;};bG.Intersect=function(bW,bX){var bY;bY=new Q.New$2(bG.ToArray(bW));bY.IntersectWith(bG.ToArray(bX));return bY;};bH.isBlank=function(bW){return bj.forall(bL.IsWhiteSpace,bW);};bI=f.CancellationTokenSource=bT.Class({},h,bI);bI.New=bT.Ctor(function(){h.New.call(this);this.c=false;this.pending=null;this.r=[];this.init=1;},bI);bJ.Children=function(bW,bX){var bY,bZ,b0;if(bX!=null&&bX.$==1){b0=[];bY=bX.$0[0].nextSibling;while(bY!==bX.$0[1]){b0.push(bY);bY=bY.nextSibling;}return{$:0,$0:b0};}else return{$:0,$0:o.init(bW.childNodes.length,(bZ=bW.childNodes,function(b1){return bZ[b1];}))};};bJ.Except=function(bW,bX){var bY;bY=bW.$0;return{$:0,$0:o.filter(function(bZ){return o.forall(function(b0){return!(bZ===b0);},bY);},bX.$0)};};bJ.Iter=function(bW,bX){o.iter(bW,bX.$0);};bJ.DocChildren=function(bW){var bX;function bY(bZ){var b0,b1,b2,b3;while(true){if(bZ!=null&&bZ.$==2){b1=bZ.$0;bZ=b1.Current;}else if(bZ!=null&&bZ.$==1)return bX.push(bZ.$0.El);else if(bZ==null)return null;else if(bZ!=null&&bZ.$==5)return bX.push(bZ.$0);else if(bZ!=null&&bZ.$==4)return bX.push(bZ.$0.Text);else if(bZ!=null&&bZ.$==6){b0=bZ.$0.Els;return(function(b4){return function(b5){o.iter(b4,b5);};}(function(b4){if(b4==null||b4.constructor===L)bY(b4);else bX.push(b4);}))(b0);}else{b2=bZ.$1;b3=bZ.$0;bY(b3);bZ=b2;}}}bX=[];bY(bW.Children);return{$:0,$0:bd.ofSeqNonCopying(bX)};};bK.Clear=function(bW){bW.splice(0,o.length(bW));};bL.IsWhiteSpace=function(bW){return bW.match(new a.RegExp("\\s"))!==null;};bM.TryParse=function(bW){var bX;bX=bV.parse(bW);return a.isNaN(bX)?null:{$:1,$0:bX};};P.TryParse=function(bW,bX,bY,bZ){var b0,b1;b0=+bW;b1=b0===b0-b0%1&&b0>=bX&&b0<=bY;if(b1)bZ.set(b0);return b1;};bN=f.OperationCanceledException=bT.Class({},bz,bN);bN.New=bT.Ctor(function(bW){bN.New$1.call(this,"The operation was canceled.",null,bW);},bN);bN.New$1=bT.Ctor(function(bW,bX,bY){this.message=bW;this.inner=bX;L.setPrototypeOf(this,bN.prototype);this.ct=bY;},bN);bO.Create=function(bW){return bR.New(false,bW,bO.forceLazy);};bO.forceLazy=function(){var bW;bW=this.v();this.c=true;this.v=bW;this.f=bO.cachedLazy;return bW;};bO.cachedLazy=function(){return this.v;};bP.$cctor=function(){bP.$cctor=a.ignore;bP.Empty={$:0};};bR.New=function(bW,bX,bY){return{c:bW,v:bX,f:bY};};bT.OnLoad(function(){c.Main();});}(self));


if (typeof WebSharper !=='undefined') {
  WebSharper.Runtime.ScriptBasePath = '/Content/';
  WebSharper.Runtime.Start();
}
